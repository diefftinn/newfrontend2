import{j as e,r as i,u as q,N as X,a as w,b as K,c as ee,R as Y,l as Q,d as te,e as ae,f as U,g as ie,B as le}from"./vendor-62avsX2M.js";(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const l of d)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function A(d){const l={};return d.integrity&&(l.integrity=d.integrity),d.referrerPolicy&&(l.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?l.credentials="include":d.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(d){if(d.ep)return;d.ep=!0;const l=A(d);fetch(d.href,l)}})();const ce=({children:t})=>e.jsx("div",{className:"content",children:t}),se="/assets/logoNostelN-Df_YHXlN.png",de=()=>{const t=sessionStorage.getItem("rol");sessionStorage.getItem("nombre");const j={ROLE_ADMIN:{titulo:"¡Bienvenido, Administrador!",subtitulo:"Gestiona usuarios, instructores y reportes del sistema Nostel."},ROLE_INSTRUCTOR:{titulo:"¡Hola, Instructor!",subtitulo:"Consulta tus fichas y asigna tareas a tus aprendices."},ROLE_APRENDIZ:{titulo:"¡Qué tal, Aprendiz!",subtitulo:"Revisa tus actividades, planes y comentarios asignados."}},{titulo:A,subtitulo:r}=j[t]||{titulo:"¡Bienvenido a Nostel!",subtitulo:"Selecciona una opción del menú para comenzar."},d=Array.from({length:6},(l,g)=>g);return e.jsxs("div",{className:"home-container",children:[d.map(l=>e.jsx("img",{src:se,alt:"Logo Nostel",className:`logo-float float-${l+1}`},l)),e.jsxs("div",{className:"welcome-card",children:[e.jsx("h1",{children:A}),e.jsx("p",{className:"subtitle",children:r})]})]})},me=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Sobre Nosotros"}),e.jsx("p",{children:"Nostel es un sistema integral diseñado para optimizar la gestión de aprendices, instructores, fichas y programas del SENA Colombia. Nuestro objetivo es facilitar los procesos administrativos y de seguimiento, permitiendo a los instructores registrar y consultar actas de actividades complementarias, planes de mejoramiento y comentarios de manera eficiente, mientras se gestionan las fichas y los instructores de forma centralizada."})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Misión"}),e.jsx("p",{children:"Nuestra misión es proporcionar una herramienta tecnológica que simplifique la administración de los procesos formativos del SENA, asegurando un seguimiento claro y organizado de las actividades de los aprendices, con un enfoque en la mejora continua y el cumplimiento de los estándares educativos."})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Visión"}),e.jsx("p",{children:"Aspiramos a convertirnos en la solución líder para la gestión educativa dentro del SENA, siendo reconocidos por nuestra capacidad para integrar tecnología y educación, ofreciendo una experiencia intuitiva y confiable para instructores y administradores."})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Objetivos"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Facilitar la creación y consulta de actas de actividades complementarias, planes de mejoramiento y comentarios."}),e.jsx("li",{children:"Centralizar la gestión de fichas e instructores, permitiendo un acceso rápido y eficiente a la información."}),e.jsx("li",{children:"Mejorar la comunicación y el seguimiento entre instructores y aprendices mediante un sistema organizado y accesible."}),e.jsx("li",{children:"Contribuir al desarrollo educativo del SENA mediante herramientas que promuevan la eficiencia y la calidad en la gestión formativa."})]})]})]})}),he=({onLogin:t})=>{const[j,A]=i.useState(""),[r,d]=i.useState(""),[l,g]=i.useState(!1);q();const u=async m=>{if(m.preventDefault(),!j||!r){alert("Por favor, completa todos los campos.");return}try{g(!0);const h=await w.post("http://localhost:8080/auth/login",{correo:j,contrasena:r},{headers:{"Content-Type":"application/json"}});g(!1);const{token:v,rol:c,correo:b,nombreCompleto:E,idUsuario:p}=h.data;v&&c?(sessionStorage.setItem("token",v),sessionStorage.setItem("rol",c),sessionStorage.setItem("correo",b),sessionStorage.setItem("nombre",E),sessionStorage.setItem("idUsuario",p),t(v),alert("Bienvenido "+c)):alert("Respuesta del servidor inválida.")}catch(h){g(!1),console.error("Error de login:",h),h.response&&console.error("Detalles del error:",h.response.status,h.response.data),alert("Credenciales incorrectas o error de servidor.")}};return e.jsx("div",{className:"PrincipalContainer",children:e.jsxs("div",{className:"loginContainer",children:[e.jsx("h1",{children:"Iniciar Sesión"}),e.jsxs("form",{onSubmit:u,className:"loginForm",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"correo",children:"Correo:"}),e.jsx("input",{id:"correo",type:"email",value:j,onChange:m=>A(m.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contrasena",children:"Contraseña:"}),e.jsx("input",{id:"contrasena",type:"password",value:r,onChange:m=>d(m.target.value)})]}),e.jsx("button",{type:"submit",disabled:l,children:l?"Ingresando...":"Iniciar Sesión"})]}),e.jsx("ul",{className:"registro",children:e.jsxs("li",{children:[e.jsx(X,{to:"/registroAprendiz",children:"Registrarse"}),e.jsx(X,{to:"/forgot-password",children:"Recuperar Contraseña"})]})})]})})},ue=()=>{const[t,j]=i.useState(""),[A,r]=i.useState(null),d=q(),l=async g=>{g.preventDefault();try{const u=sessionStorage.getItem("token");if(!u){console.error("No hay token de autenticación"),r("Sesión no válida. Por favor inicie sesión nuevamente."),setTimeout(()=>{d("/login")},3e3);return}const m={headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}},h={nombrePrograma:t};await w.post("http://localhost:8080/programas",h,m),d("/gestion-programas")}catch(u){console.error("Error al agregar programa:",u),r("Hubo un problema al agregar el programa. Por favor, inténtelo de nuevo.")}};return e.jsxs("div",{className:"agregar-programa-container",children:[e.jsx("h2",{children:"Agregar Nuevo Programa"}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombrePrograma",children:"Nombre del Programa:"}),e.jsx("input",{type:"text",id:"nombrePrograma",value:t,onChange:g=>j(g.target.value),required:!0})]}),A&&e.jsx("div",{className:"error-message",children:A}),e.jsx("button",{type:"submit",className:"submit-button",children:"Agregar Programa"})]})]})},pe=()=>{const[t,j]=i.useState([]),[A,r]=i.useState(!0),[d,l]=i.useState(null),g=q();i.useEffect(()=>{m()},[]);const u=()=>{g("/agregar-programa")},m=async()=>{try{const h=sessionStorage.getItem("token");if(!h){console.error("No hay token de autenticación"),l("Sesión no válida. Por favor inicie sesión nuevamente."),setTimeout(()=>{g("/login")},3e3);return}const v={headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}},c=await w.get("http://localhost:8080/programas",v);j(c.data),r(!1)}catch(h){console.error("Error al obtener programas:",h),h.response?h.response.status===403?(l("No tiene permisos para acceder a esta información. Este recurso está restringido."),setTimeout(()=>{g("/login")},3e3)):h.response.status===401?(l("Sesión no válida. Por favor inicie sesión nuevamente."),localStorage.removeItem("token"),setTimeout(()=>{g("/login")},3e3)):l(`Error del servidor: ${h.response.status}. Por favor, inténtelo de nuevo más tarde.`):h.request?l("No se pudo conectar con el servidor. Verifique su conexión a internet."):l(`Error: ${h.message}`),r(!1)}};return A?e.jsx("div",{className:"loading-container",children:"Cargando programas..."}):d?e.jsx("div",{className:"error-message",children:d}):e.jsxs("div",{className:"gestion-programas-container",children:[e.jsx("h2",{children:"Lista de Programas Formativos"}),t.length===0?e.jsx("p",{className:"no-programas",children:"No hay programas registrados."}):e.jsx("ul",{className:"programas-list",children:t.map(h=>e.jsx("li",{className:"programa-item",children:e.jsx("div",{className:"programa-nombre",children:h.nombrePrograma})},h.idPrograma))}),e.jsx("button",{onClick:u,className:"add-program-button",children:"Agregar Nuevo Programa"})]})},je=()=>{const[t,j]=i.useState([]),[A,r]=i.useState(!0),[d,l]=i.useState(null),g=q();i.useEffect(()=>{m()},[]);const u=()=>{g("/agregar-ficha")},m=async()=>{try{const c=sessionStorage.getItem("token");if(!c){console.error("No hay token de autenticación"),l("Sesión no válida. Por favor inicie sesión nuevamente."),setTimeout(()=>{g("/")},3e3);return}const b={headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}},E=await w.get("http://localhost:8080/fichas",b);j(E.data),r(!1)}catch(c){console.error("Error al obtener fichas:",c),h(c)}},h=c=>{c.response?c.response.status===403||c.response.status===401?(l("No tiene permisos para acceder a esta información."),localStorage.removeItem("token"),setTimeout(()=>{g("/")},3e3)):l(`Error del servidor: ${c.response.status}`):c.request?l("No se pudo conectar con el servidor."):l("Error al procesar la solicitud."),r(!1)},v=async c=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta ficha?"))try{const E=sessionStorage.getItem("token");if(!E){l("Sesión no válida. Por favor inicie sesión nuevamente."),setTimeout(()=>{g("/login")},3e3);return}const p={headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}};await w.delete(`http://localhost:8080/fichas/${c}`,p),m()}catch(E){console.error("Error al eliminar la ficha:",E),l("Error al eliminar la ficha. Por favor, inténtelo de nuevo.")}};return A?e.jsx("div",{className:"loading-container",children:"Cargando fichas..."}):d?e.jsx("div",{className:"error-message",children:d}):e.jsxs("div",{className:"gestion-fichas-container",children:[e.jsx("h2",{children:"Lista de Fichas"}),t.length===0?e.jsx("p",{className:"no-fichas",children:"No hay fichas registradas."}):e.jsx("div",{className:"fichas-list",children:t.map(c=>e.jsxs("div",{className:"ficha-item",children:[e.jsxs("div",{className:"ficha-info",children:[e.jsxs("div",{className:"ficha-numero",children:[e.jsx("strong",{children:"Número de Ficha:"})," ",c.numeroFicha]}),e.jsxs("div",{className:"ficha-programa",children:[e.jsx("strong",{children:"Programa:"})," ",c.nombrePrograma]}),e.jsxs("div",{className:"ficha-ambiente",children:[e.jsx("strong",{children:"Ambiente:"})," ",c.numeroAmbiente]}),e.jsxs("div",{className:"ficha-aprendices",children:[e.jsx("strong",{children:"Aprendices:"})," ",c.totalAprendices]})]}),e.jsx("button",{onClick:()=>v(c.idFicha),className:"delete-button",children:"Eliminar"})]},c.idFicha))}),e.jsx("button",{onClick:u,className:"agregar-ficha-button",children:"Agregar Ficha"})]})},xe=()=>{const[t,j]=i.useState([]),[A,r]=i.useState(null),d=q();i.useEffect(()=>{(async()=>{try{const v=await w.get("http://localhost:8080/api/programas");j(v.data)}catch(v){console.error("Error cargando programas:",v)}})()},[]);const[l,g]=i.useState({numeroFicha:"",nombrePrograma:"",horario:"",fechaInicio:"",fechaFin:"",numeroAmbiente:""}),u=async h=>{h.preventDefault();try{const v=sessionStorage.getItem("token");if(!v){console.error("No hay token de autenticación"),r("Sesión no válida. Por favor inicie sesión nuevamente."),setTimeout(()=>{d("/login")},3e3);return}const c={headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}},b={numeroFicha:parseInt(l.numeroFicha,10),nombrePrograma:l.nombrePrograma,horario:l.horario,fechaInicio:l.fechaInicio,fechaFin:l.fechaFin,numeroAmbiente:parseInt(l.numeroAmbiente,10)};await w.post("http://localhost:8080/api/fichas",b,c),d("/gestion-fichas")}catch(v){console.error("Error al agregar ficha:",v),r("Hubo un problema al agregar la ficha. Por favor, inténtelo de nuevo.")}},m=h=>{const{id:v,value:c}=h.target;g(b=>({...b,[v]:c}))};return e.jsxs("div",{className:"agregar-ficha-container",children:[e.jsx("h2",{children:"Agregar Nueva Ficha"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"numeroFicha",children:"Número de Ficha:"}),e.jsx("input",{type:"number",id:"numeroFicha",value:l.numeroFicha,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombrePrograma",children:"Nombre del Programa:"}),e.jsxs("select",{id:"nombrePrograma",value:l.nombrePrograma,onChange:m,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un programa"}),t.map(h=>e.jsx("option",{value:h.nombrePrograma,children:h.nombrePrograma},h.idPrograma))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"horario",children:"Horario:"}),e.jsx("input",{type:"text",id:"horario",value:l.horario,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fechaInicio",children:"Fecha de Inicio:"}),e.jsx("input",{type:"date",id:"fechaInicio",value:l.fechaInicio,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fechaFin",children:"Fecha de Fin:"}),e.jsx("input",{type:"date",id:"fechaFin",value:l.fechaFin,onChange:m,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"numeroAmbiente",children:"Número de Ambiente:"}),e.jsx("input",{type:"number",id:"numeroAmbiente",value:l.numeroAmbiente,onChange:m,required:!0})]}),A&&e.jsx("div",{className:"error-message",children:A}),e.jsx("button",{type:"submit",className:"submit-button",children:"Agregar Ficha"})]})]})},ge=()=>{const[t,j]=i.useState([]),[A,r]=i.useState(!0),[d,l]=i.useState(null),g=q();i.useEffect(()=>{m()},[]);const u=()=>{g("/agregarInstructor")},m=async()=>{try{console.log("Iniciando fetchInstructores...");const h=sessionStorage.getItem("token");if(!h){console.error("No hay token de autenticación"),l("Sesión no válida. Por favor inicie sesión nuevamente."),g("/login");return}const v={headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},timeout:5e3};console.log("Realizando petición a http://localhost:8080/instructores");const c=await w.get("http://localhost:8080/instructores",v);console.log("Datos recibidos:",c.data);let b=Array.isArray(c.data)?c.data:c.data.instructores||[];j(b),r(!1)}catch(h){console.error("Error al obtener instructores:",h),h.response?(console.error("Respuesta de error:",h.response.status,h.response.data),h.response.status===403||h.response.status===401?(localStorage.removeItem("token"),g("/login")):l(`Error del servidor: ${h.response.status}. Inténtelo más tarde.`)):l("No se pudo conectar con el servidor. Verifique su conexión."),r(!1)}};return A?e.jsx("div",{className:"loading-container",children:"Cargando instructores..."}):d?e.jsx("div",{className:"error-message",children:d}):e.jsxs("div",{className:"gestion-instructores-container",children:[e.jsx("h2",{children:"Lista de Instructores"}),t.length===0?e.jsx("p",{className:"no-instructores",children:"No hay instructores registrados."}):e.jsx("ul",{className:"instructores-list",children:t.map(h=>e.jsxs("li",{className:"instructor-item",children:[e.jsxs("div",{className:"instructor-nombre",children:[h.nombres," ",h.apellidos]}),e.jsx("div",{className:"instructor-especialidad",children:h.area||"Sin área asignada"}),e.jsxs("div",{className:"instructor-docente",children:["Número Docente: ",h.numeroDocente??"No disponible"]})]},h.idInstructor))}),e.jsx("button",{onClick:u,children:"Agregar Instructor"})]})};class fe{}const Ne=()=>{const[t,j]=i.useState([]),[A,r]=i.useState(!0),[d,l]=i.useState(""),[g,u]=i.useState(null),m=q();i.useEffect(()=>{h()},[]);const h=async()=>{try{const c=sessionStorage.getItem("token");if(!c){console.error("No hay token de autenticación"),m("/login");return}console.log("Token utilizado:",c);const b={headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}},E=await w.get("http://localhost:8080/aprendices",b);j(E.data),r(!1)}catch(c){console.error("Error al obtener aprendices:",c),c.response&&(console.error("Respuesta de error:",c.response.status,c.response.data),(c.response.status===403||c.response.status===401)&&(console.error("Error de autenticación. Redirigiendo al login..."),localStorage.removeItem("token"),m("/login"))),u("Error al cargar los aprendices. Por favor, inténtelo de nuevo más tarde."),r(!1)}},v=t.filter(c=>{var b;return`${c.nombres} ${c.apellidos}`.toLowerCase().includes(d.toLowerCase())||((b=c.documento)==null?void 0:b.toString().includes(d))});return A?e.jsx("div",{children:"Cargando..."}):g?e.jsx("div",{className:"error-message",children:g}):e.jsxs("div",{className:"gestion-aprendices-container",children:[e.jsx("h2",{children:"Lista de Aprendices"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o documento",value:d,onChange:c=>l(c.target.value),className:"buscador-aprendices"}),t.length===0?e.jsx("p",{className:"no-aprendices",children:"No hay aprendices registrados."}):e.jsx("ul",{className:"aprendices-list",children:v.map(c=>e.jsxs("li",{className:"aprendiz-item",onClick:()=>m(`/aprendices/${c.idAprendiz}`),children:[e.jsxs("strong",{children:[c.nombres," ",c.apellidos]}),e.jsxs("span",{className:"ficha-info",children:[" ","Programa: ",c.nombrePrograma," Ficha:"," ",c.numeroFicha," Ambiente: ",c.numeroAmbiente]})]},c.idAprendiz))})]})},Z="/assets/logoSena-B7rKe33-.png",be=()=>{const t=q(),{idAprendiz:j}=K(),A=ee(),[r,d]=i.useState({idInstructor:null,actaNumber:"",nombreComite:"",ciudad:"Armenia",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaFin:"",lugarEnlace:"",direccionRegionalCentro:sessionStorage.getItem("regional")||"Centro de Comercio y Turismo",agenda:"",objetivos:"",desarrollo:"",conclusiones:"",estado:"Pendiente",compromisos:[{actividadDecision:"",fecha:"",responsable:"",firmaParticipacion:""}],asistentes:[{nombre:"",numeroDocumento:"",correoElectronico:"",telefonoExt:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}],version:"02",codigo:"GOR-F-084"}),[l,g]=i.useState(!1),[u,m]=i.useState(null),[h,v]=i.useState(!1),[c,b]=i.useState(!1),[E,p]=i.useState([]),[I,y]=i.useState(null),f={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]};i.useEffect(()=>{(async()=>{var a,s;try{const S=sessionStorage.getItem("token"),z=sessionStorage.getItem("idUsuario");if(!S||!z){m("No hay token de autenticación o ID de usuario disponible"),t("/login");return}const O=await w.get(`http://localhost:8080/instructores/usuario/${z}`,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}});d($=>({...$,idInstructor:O.data.idInstructor,asistentes:[{nombre:`${O.data.nombres} ${O.data.apellidos}`,numeroDocumento:O.data.numeroDocente||"",correoElectronico:O.data.correo||"",telefonoExt:O.data.telefono||"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"Instructor",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}]}))}catch(S){console.error("Error al obtener datos del instructor:",S),S.response&&S.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error al cargar datos del instructor: ${((s=(a=S.response)==null?void 0:a.data)==null?void 0:s.message)||S.message}`)}})()},[t]),i.useEffect(()=>{j&&(async()=>{var a,s;try{const S=sessionStorage.getItem("token");if(!S||!j){m("No hay token de autenticación o ID de aprendiz disponible"),t("/aprendices");return}const O=(await w.get(`http://localhost:8080/aprendices/${j}`,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}})).data;y(O),d($=>({...$,asistentes:[...$.asistentes,{nombre:`${O.nombres} ${O.apellidos}`,numeroDocumento:O.documento||"",correoElectronico:O.correo||"",telefonoExt:O.telefono||"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"Aprendiz",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}]}))}catch(S){console.error("Error al obtener datos del aprendiz:",S),S.response&&S.response.status===404?(m("No se encontró un aprendiz con el ID proporcionado."),setTimeout(()=>t("/aprendices"),3e3)):S.response&&S.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error al cargar datos del aprendiz: ${((s=(a=S.response)==null?void 0:a.data)==null?void 0:s.message)||S.message}`)}})()},[j,t]),i.useEffect(()=>{if(A.state&&A.state.actividadGenerada&&I){const{actividadGenerada:n}=A.state;console.log("Datos recibidos de location.state:",n);const a=s=>s?s.split(`
`).map(S=>`<p>${S.trim()}</p>`).join(""):"";d(s=>({...s,nombreComite:n.nombreComite||s.nombreComite,agenda:a(n.agenda)||s.agenda,objetivos:a(n.objetivos)||s.objetivos,desarrollo:a(n.desarrollo)||s.desarrollo,conclusiones:a(n.conclusiones)||s.conclusiones,compromisos:[{actividadDecision:"",fecha:s.fecha,responsable:`${I.nombres} ${I.apellidos}`,firmaParticipacion:""}]}))}},[A.state,I]);const o=(n,a,s)=>{const{name:S,value:z,type:O,checked:$}=n.target,_=O==="checkbox"?$:z;d(s?N=>{const P=[...N[s]];return P[a]={...P[a],[S]:_},{...N,[s]:P}}:N=>({...N,[S]:_}))},C=new Date().toISOString().split("T")[0],L=(n=>{const a=new Date(n);return{dia:a.getDate(),mes:a.toLocaleString("default",{month:"long"}),anio:a.getFullYear()}})(r.fecha),D=(n,a)=>{const{name:s,value:S,type:z,checked:O}=n.target,$=z==="checkbox"?O:S;p(_=>{const N=[..._];return N[a]={...N[a],[s]:$},N})},k=()=>{d(n=>({...n,asistentes:[...n.asistentes,{nombre:"",numeroDocumento:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",correoElectronico:"",telefonoExt:"",autorizaGrabacion:!1,aprueba:"SÍ",observacion:"",firmaParticipacion:""}]}))},F=n=>{d(a=>{const s=[...a.asistentes];return n>=2&&s.splice(n,1),{...a,asistentes:s}})},M=()=>{p(n=>[...n,{nombre:"",numeroDocumento:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",correoElectronico:"",telefonoExt:"",autorizaGrabacion:!1,firmaParticipacion:""}])},B=()=>{try{if(r.asistentes.some(a=>!a.nombre||!a.dependenciaEmpresa)){m("Por favor, completa los campos Nombre y Dependencia/Empresa para todos los asistentes antes de continuar.");return}p(r.asistentes.map(a=>({nombre:a.nombre,numeroDocumento:a.numeroDocumento,planta:a.planta,contratista:a.contratista,otro:a.otro,dependenciaEmpresa:a.dependenciaEmpresa,correoElectronico:a.correoElectronico,telefonoExt:a.telefonoExt,autorizaGrabacion:a.autorizaGrabacion,firmaParticipacion:a.firmaParticipacion}))),b(!0)}catch(n){console.error("Error al abrir el modal:",n),m("Error al abrir el modal de registro de asistencia. Por favor, intenta nuevamente.")}},V=()=>{if(E.some(a=>!a.nombre||!a.numeroDocumento||!a.firmaParticipacion)){m("Todos los campos obligatorios (Nombre, Número de Documento y Firma) deben estar llenos.");return}d(a=>({...a,asistentes:E.map(s=>({...s,aprueba:s.aprueba||"SÍ",observacion:s.observacion||""}))})),b(!1),J()},J=async()=>{var n,a;g(!0),m(null);try{const s=sessionStorage.getItem("token");if(!s){m("No se ha identificado al instructor"),g(!1);return}const S=await w.post(`http://localhost:8080/actividadComplementarias/${j}`,r,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});v(!0),setTimeout(()=>{v(!1),t(`/aprendices/${j}`)},2e3)}catch(s){console.error("Error al guardar el acta:",s),s.response&&s.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error: ${((a=(n=s.response)==null?void 0:n.data)==null?void 0:a.message)||s.message}`)}finally{g(!1)}},G=(n,a)=>{d(s=>({...s,[n]:a}))};return e.jsxs("div",{className:"formato-sena-container",children:[e.jsxs("div",{className:"header-with-logo",children:[e.jsx("img",{src:Z,alt:"Logo SENA",className:"sena-logo"}),e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"ACTIVIDAD COMPLEMENTARIA"]})]}),e.jsxs("form",{onSubmit:n=>{n.preventDefault(),B()},className:"sena-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ACTA No."}),e.jsx("input",{type:"text",name:"actaNumber",value:r.actaNumber,onChange:o,placeholder:"Número de acta",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"NOMBRE DEL COMITÉ O DE LA REUNIÓN"}),e.jsx("input",{type:"text",name:"nombreComite",value:r.nombreComite,onChange:o,placeholder:"Nombre del comité o reunión",required:!0})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CIUDAD Y FECHA"}),e.jsxs("div",{className:"form-group-pair",children:[e.jsx("input",{type:"text",name:"ciudad",value:r.ciudad,onChange:o,placeholder:"Ciudad",required:!0}),e.jsx("input",{type:"date",name:"fecha",value:r.fecha,onChange:o,required:!0,min:C})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA INICIO"}),e.jsx("input",{type:"time",name:"horaInicio",value:r.horaInicio,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA FIN"}),e.jsx("input",{type:"time",name:"horaFin",value:r.horaFin,onChange:o,required:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"LUGAR Y/O ENLACE"}),e.jsx("input",{type:"text",name:"lugarEnlace",value:r.lugarEnlace,onChange:o,placeholder:"Lugar o enlace de la reunión",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DIRECCIÓN / REGIONAL / CENTRO"}),e.jsx("input",{type:"text",name:"direccionRegionalCentro",value:r.direccionRegionalCentro,onChange:o,required:!0})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"AGENDA O PUNTOS PARA DESARROLLAR"}),e.jsx(Y,{theme:"snow",modules:f,value:r.agenda,onChange:n=>G("agenda",n),placeholder:"Describa la agenda o puntos a desarrollar..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"OBJETIVO(S) DE LA REUNIÓN"}),e.jsx(Y,{theme:"snow",modules:f,value:r.objetivos,onChange:n=>G("objetivos",n),placeholder:"Describa los objetivos de la reunión..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DESARROLLO DE LA REUNIÓN"}),e.jsx(Y,{theme:"snow",modules:f,value:r.desarrollo,onChange:n=>G("desarrollo",n),placeholder:"Describa el desarrollo de la reunión..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"CONCLUSIONES"}),e.jsx(Y,{theme:"snow",modules:f,value:r.conclusiones,onChange:n=>G("conclusiones",n),placeholder:"Describa las conclusiones de la reunión..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ESTABLECIMIENTO Y ACEPTACIÓN DE COMPROMISOS"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ACTIVIDAD / DECISIÓN"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"RESPONSABLE"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})}),e.jsx("tbody",{children:r.compromisos.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"actividadDecision",value:n.actividadDecision,onChange:s=>o(s,a,"compromisos"),placeholder:"Actividad o decisión"})}),e.jsx("td",{children:e.jsx("input",{type:"date",name:"fecha",value:n.fecha,onChange:s=>o(s,a,"compromisos"),min:C})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"responsable",value:n.responsable,onChange:s=>o(s,a,"compromisos"),placeholder:"Nombre del responsable",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>o(s,a,"compromisos"),placeholder:"Firma o participación virtual"})})]},a))})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ASISTENTES Y APROBACIÓN DECISIONES"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"APRUEBA (SÍ/NO)"}),e.jsx("th",{children:"OBSERVACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"}),e.jsx("th",{children:"Eliminar"})]})}),e.jsx("tbody",{children:r.asistentes.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:s=>o(s,a,"asistentes"),placeholder:"Nombre completo",readOnly:a<2})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"dependenciaEmpresa",value:n.dependenciaEmpresa,onChange:s=>o(s,a,"asistentes"),placeholder:"Dependencia o empresa",readOnly:a<2})}),e.jsx("td",{children:e.jsxs("select",{name:"aprueba",value:n.aprueba,onChange:s=>o(s,a,"asistentes"),children:[e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"observacion",value:n.observacion,onChange:s=>o(s,a,"asistentes"),placeholder:"Observaciones"})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>o(s,a,"asistentes"),placeholder:"Firma o participación virtual"})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"delete-row-button",disabled:a<2,onClick:()=>{a<2?alert("No se puede eliminar al instructor ni al aprendiz"):F(a)},title:a<2?"No se puede eliminar":"Eliminar asistente",children:"❌"})})]},a))})]}),e.jsx("button",{type:"button",className:"add-row-button",onClick:k,children:"Agregar Asistente"})]}),e.jsx("div",{className:"form-section",children:e.jsx("p",{className:"legal-note",children:"De acuerdo con La Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA, se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})}),e.jsx("div",{className:"document-footer",children:e.jsxs("span",{className:"codigo",children:["Código: ",r.codigo]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>t(`/aprendices/${j}`),disabled:l,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:l?"Avanzando":"Siguiente"})]})]}),u&&e.jsx("div",{className:"error-message",children:u}),c&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"header-with-logo",children:[e.jsx("img",{src:Z,alt:"Logo SENA",className:"sena-logo"}),e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"REGISTRO DE ASISTENCIA"]})]}),e.jsxs("div",{className:"document-header",children:[e.jsxs("span",{children:["DÍA: ",L.dia]}),e.jsxs("span",{children:["MES: ",L.mes]}),e.jsxs("span",{children:["AÑO: ",L.anio]})]}),e.jsx("div",{className:"form-section",children:e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"OBJETIVO(S)"}),e.jsx(Y,{theme:"snow",modules:f,value:r.objetivos,onChange:n=>G("objetivos",n),placeholder:"Describa los objetivos de la reunión...",readOnly:!0})]})})}),e.jsxs("div",{className:"form-section1",children:[e.jsx("h3",{children:"ASISTENTES"}),e.jsxs("table",{className:"sena-table1",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"N°"}),e.jsx("th",{children:"NOMBRES Y APELLIDOS"}),e.jsx("th",{children:"N°. DOCUMENTO"}),e.jsx("th",{children:"PLANTA"}),e.jsx("th",{children:"CONTRATISTA"}),e.jsx("th",{children:"OTRO"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"CORREO ELECTRÓNICO"}),e.jsx("th",{children:"TELÉFONO / EXT."}),e.jsx("th",{children:"AUTORIZA GRABACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"}),e.jsx("th",{children:"Eliminar"})]})}),e.jsx("tbody",{children:E.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:s=>D(s,a),placeholder:"Nombres y apellidos",required:!0,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"numeroDocumento",value:n.numeroDocumento,onChange:s=>D(s,a),placeholder:"Número de documento",required:!0,readOnly:a<2})}),e.jsx("td",{children:e.jsxs("select",{name:"planta",value:n.planta,onChange:s=>D(s,a),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione"}),e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsxs("select",{name:"contratista",value:n.contratista,onChange:s=>D(s,a),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione"}),e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"otro",value:n.otro,onChange:s=>D(s,a),placeholder:"Otro"})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"dependenciaEmpresa",value:n.dependenciaEmpresa,onChange:s=>D(s,a),placeholder:"Dependencia o empresa",required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"email",name:"correoElectronico",value:n.correoElectronico,onChange:s=>D(s,a),placeholder:"Correo electrónico",required:!0,readOnly:a<2})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"telefonoExt",value:n.telefonoExt,onChange:s=>D(s,a),placeholder:"Teléfono o extensión",readOnly:a<2,required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"checkbox",name:"autorizaGrabacion",checked:n.autorizaGrabacion,onChange:s=>D(s,a)})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>D(s,a),placeholder:"Firma o participación virtual",required:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"delete-row-button",onClick:()=>{a<2||p(s=>{const S=[...s];return S.splice(a,1),S})},disabled:a<2,title:a<2?"No se puede eliminar":"Eliminar este asistente",children:"❌"})})]},a))})]}),e.jsx("button",{type:"button",className:"add-row-button",onClick:M,children:"Agregar Asistente"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>b(!1),disabled:l,children:"Cancelar"}),e.jsx("button",{type:"button",className:"submit-button",onClick:V,disabled:l,children:l?"Guardando...":"Confirmar y Guardar"})]})]})}),h&&e.jsx("div",{className:"success-modal-overlay",children:e.jsx("div",{className:"success-modal-content",children:e.jsx("h2",{children:"¡Actividad complementaria guardada exitosamente!"})})})]})},ve=()=>{const t=()=>{console.log("Cerrando sesión..."),sessionStorage.removeItem("token"),window.location.reload()};return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"navBar",children:[e.jsx("img",{src:se,alt:""}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(X,{to:"/",children:"Inicio"})}),e.jsx("li",{children:e.jsx(X,{to:"/gestion-aprendices",children:"Aprendices"})}),e.jsx("li",{children:e.jsx(X,{to:"/gestion-fichas",children:"Fichas"})}),e.jsx("li",{children:e.jsx(X,{to:"/gestion-instructores",children:"Instructores"})}),e.jsx("li",{children:e.jsx(X,{to:"/gestion-programas",children:"Programas"})}),e.jsx("li",{children:e.jsx(X,{to:"/aboutUs",children:"Acerca de Nosotros"})})]}),e.jsx("button",{className:"botonSalir",onClick:t,children:"Cerrar Sesión"})]})})},Ee=()=>e.jsx("div",{className:"container-navbar",children:e.jsx(ve,{})}),Ce=({actividad:t,onActividadActualizada:j,onClose:A})=>{const[r,d]=i.useState({idActividad:t.idActividad,idAprendiz:t.idAprendiz,idInstructor:t.idInstructor,actaNumber:t.actaNumber||"",nombreComite:t.nombreComite||"",ciudad:t.ciudad||"Armenia",fecha:t.fecha?t.fecha.split("T")[0]:"",horaInicio:t.horaInicio||"",horaFin:t.horaFin||"",lugarEnlace:t.lugarEnlace||"",direccionRegionalCentro:t.direccionRegionalCentro||"",agenda:t.agenda||"",objetivos:t.objetivos||"",desarrollo:t.desarrollo||"",conclusiones:t.conclusiones||"",estado:t.estado||"Pendiente",compromisos:t.compromisos&&t.compromisos.length>0?t.compromisos.map(f=>({actividadDecision:f.actividadDecision||"",fecha:f.fecha?f.fecha.split("T")[0]:"",responsable:f.responsable||"",firmaParticipacion:f.firmaParticipacion||""})):[{actividadDecision:"",fecha:"",responsable:"",firmaParticipacion:""}],asistentes:t.asistentes&&t.asistentes.length>0?t.asistentes.map(f=>({nombre:f.nombre||"",dependenciaEmpresa:f.dependenciaEmpresa||"",aprueba:f.aprueba||"SÍ",observacion:f.observacion||"",firmaParticipacion:f.firmaParticipacion||""})):[],version:t.version||"02",codigo:t.codigo||"GOR-F-084"}),[l,g]=i.useState(!1),[u,m]=i.useState(null),[h,v]=i.useState(!1),c={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},b=(f,o,C)=>{const{name:T,value:L}=f.target;d(C?D=>{const k=[...D[C]];return k[o]={...k[o],[T]:L},{...D,[C]:k}}:D=>({...D,[T]:L}))},E=(f,o)=>{d(C=>({...C,[f]:o}))},p=()=>{d(f=>({...f,asistentes:[...f.asistentes,{nombre:"",dependenciaEmpresa:"",aprueba:"SÍ",observacion:"",firmaParticipacion:""}]}))},I=()=>r.compromisos.some(C=>!C.actividadDecision||!C.fecha||!C.responsable||!C.firmaParticipacion)?(m("Todos los campos de los compromisos son obligatorios."),!1):r.asistentes.slice(2).some(C=>!C.nombre||!C.dependenciaEmpresa||!C.firmaParticipacion)?(m("Los campos nombre, dependencia/empresa y firma son obligatorios para los asistentes adicionales."),!1):r.asistentes.length<2?(m("Se requieren al menos el instructor y el aprendiz como asistentes."),!1):!0,y=async f=>{var o,C;if(f.preventDefault(),g(!0),m(null),v(!1),!I()){g(!1);return}try{const T=sessionStorage.getItem("token"),L=sessionStorage.getItem("idUsuario");if(!T||!L){m("Falta información de autenticación"),g(!1);return}const D={...r,idAprendiz:t.idAprendiz};console.log("Enviando datos actualizados de la actividad:",D);const k=await w.put(`http://localhost:8080/actividadComplementarias/${r.idAprendiz}/${r.idActividad}`,D,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});console.log("Respuesta del servidor:",k.data),v(!0),j&&j(k.data),setTimeout(()=>{A()},2e3)}catch(T){console.error("Error al actualizar actividad:",T),m(`Error al actualizar la actividad: ${((C=(o=T.response)==null?void 0:o.data)==null?void 0:C.message)||T.message}`)}finally{g(!1)}};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-container",children:[e.jsx("div",{className:"modal-header",children:e.jsx("h2",{children:"Editar Actividad Complementaria"})}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ACTA No."}),e.jsx("input",{type:"text",name:"actaNumber",value:r.actaNumber,onChange:b,placeholder:"Número de acta",required:!0,disabled:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"NOMBRE DEL COMITÉ O DE LA REUNIÓN"}),e.jsx("input",{type:"text",name:"nombreComite",value:r.nombreComite,onChange:b,placeholder:"Nombre del comité o reunión",required:!0})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CIUDAD Y FECHA"}),e.jsxs("div",{className:"form-group-pair",children:[e.jsx("input",{type:"text",name:"ciudad",value:r.ciudad,onChange:b,placeholder:"Ciudad",required:!0}),e.jsx("input",{type:"date",name:"fecha",value:r.fecha,onChange:b,required:!0,disabled:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA INICIO"}),e.jsx("input",{type:"time",name:"horaInicio",value:r.horaInicio,onChange:b,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA FIN"}),e.jsx("input",{type:"time",name:"horaFin",value:r.horaFin,onChange:b,required:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"LUGAR Y/O ENLACE"}),e.jsx("input",{type:"text",name:"lugarEnlace",value:r.lugarEnlace,onChange:b,placeholder:"Lugar o enlace de la reunión",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DIRECCIÓN / REGIONAL / CENTRO"}),e.jsx("input",{type:"text",name:"direccionRegionalCentro",value:r.direccionRegionalCentro,onChange:b,required:!0})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"AGENDA O PUNTOS PARA DESARROLLAR"}),e.jsx(Y,{theme:"snow",modules:c,value:r.agenda,onChange:f=>E("agenda",f),placeholder:"Describa la agenda o puntos a desarrollar..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"OBJETIVO(S) DE LA REUNIÓN"}),e.jsx(Y,{theme:"snow",modules:c,value:r.objetivos,onChange:f=>E("objetivos",f),placeholder:"Describa los objetivos de la reunión..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DESARROLLO DE LA REUNIÓN"}),e.jsx(Y,{theme:"snow",modules:c,value:r.desarrollo,onChange:f=>E("desarrollo",f),placeholder:"Describa el desarrollo de la reunión..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"CONCLUSIONES"}),e.jsx(Y,{theme:"snow",modules:c,value:r.conclusiones,onChange:f=>E("conclusiones",f),placeholder:"Describa las conclusiones de la reunión..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ESTABLECIMIENTO Y ACEPTACIÓN DE COMPROMISOS"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ACTIVIDAD / DECISIÓN"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"RESPONSABLE"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})}),e.jsx("tbody",{children:r.compromisos.map((f,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"actividadDecision",value:f.actividadDecision,onChange:C=>b(C,o,"compromisos"),placeholder:"Actividad o decisión",required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"date",name:"fecha",value:f.fecha,onChange:C=>b(C,o,"compromisos"),required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"responsable",value:f.responsable,onChange:C=>b(C,o,"compromisos"),placeholder:"Nombre del responsable",required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:f.firmaParticipacion,onChange:C=>b(C,o,"compromisos"),placeholder:"Firma o participación virtual",required:!0})})]},o))})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ASISTENTES Y APROBACIÓN DECISIONES"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"APRUEBA (SÍ/NO)"}),e.jsx("th",{children:"OBSERVACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})}),e.jsx("tbody",{children:r.asistentes.map((f,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"nombre",value:f.nombre,onChange:C=>b(C,o,"asistentes"),placeholder:"Nombre completo",readOnly:o<2,required:o>=2})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"dependenciaEmpresa",value:f.dependenciaEmpresa,onChange:C=>b(C,o,"asistentes"),placeholder:"Dependencia o empresa",readOnly:o<2,required:o>=2})}),e.jsx("td",{children:e.jsxs("select",{name:"aprueba",value:f.aprueba,onChange:C=>b(C,o,"asistentes"),children:[e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"observacion",value:f.observacion,onChange:C=>b(C,o,"asistentes"),placeholder:"Observaciones"})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:f.firmaParticipacion,onChange:C=>b(C,o,"asistentes"),placeholder:"Firma o participación virtual",readOnly:o<2,required:o>=2})})]},o))})]}),e.jsx("button",{type:"button",className:"add-row-button",onClick:p,children:"Agregar Asistente"})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:A,disabled:l,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:l?"Guardando...":"Actualizar Actividad"})]})]})})]})})},Ae=({idAprendiz:t})=>{var N,P;const j=q(),[A,r]=i.useState([]),[d,l]=i.useState(!0),[g,u]=i.useState(null),[m,h]=i.useState(null),[v,c]=i.useState(!1),[b,E]=i.useState(null),[p,I]=i.useState({type:"",message:""}),[y,f]=i.useState(null),[o,C]=i.useState(null),[T,L]=i.useState(!1),[D,k]=i.useState("actividades"),F=i.useRef(),M=i.useRef();i.useEffect(()=>{const x=R=>{R.key==="Escape"&&(L(!1),c(!1),k("actividades"))};return(T||v)&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[T,v]),i.useEffect(()=>{if(!t||isNaN(t)){u("ID de aprendiz inválido."),l(!1);return}(async()=>{try{l(!0);const R=sessionStorage.getItem("token");if(!R){u("No hay token de autenticación"),j("/login");return}const H=await w.get(`http://localhost:8080/actividadComplementarias/${t}`,{headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});console.log("Actividades recibidas:",H.data),r(H.data),u(null)}catch(R){console.error("Error al cargar actividades:",R),u("Error al cargar las actividades complementarias.")}finally{l(!1)}})()},[t,j]),i.useEffect(()=>{(async()=>{try{const R=sessionStorage.getItem("token"),H=sessionStorage.getItem("idUsuario");if(!R||!H){console.log("No se encontró token o idUsuario en sessionStorage");return}const W=await w.get(`http://localhost:8080/instructores/usuario/${H}`,{headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});f(W.data)}catch(R){console.error("Error al obtener datos del instructor:",R)}})()},[]);const B=()=>{if(!t||isNaN(t)){u("ID de aprendiz inválido. No se puede agregar actividad.");return}j(`/agregar-actividad/${t}`)},V=x=>{r(R=>R.map(H=>H.idActividad===x.idActividad?x:H)),c(!1),h(null)},J=x=>{h(x),c(!0)},G=async x=>{try{const R=sessionStorage.getItem("token");if(!R)throw new Error("Sin token de autenticación");const H=await w.delete(`http://localhost:8080/actividadComplementarias/${t}/${x}`,{headers:{Authorization:`Bearer ${R}`}});H.status>=200&&H.status<300?(r(W=>W.filter(ne=>ne.idActividad!==x)),setTimeout(()=>{E(null),I({type:"success",message:"Actividad eliminada con éxito."})},2e3)):setTimeout(()=>{E(null),I({type:"error",message:"No se pudo eliminar la actividad."})},2e3)}catch{I({type:"error",message:"Error al eliminar la actividad."})}},n=x=>!sessionStorage.getItem("idUsuario")||!y||!y.idInstructor?!1:x.idInstructor===y.idInstructor,a=Q.useReactToPrint({contentRef:F,documentTitle:`Acta_${(o==null?void 0:o.idActividad)||"default"}`,pageStyle:`
      @page {
        size: letter portrait;
        margin: 3cm 2.5cm 2.5cm 2.5cm;
      }
      @media print {
        body * {
          visibility: hidden;
        }
        .acta-imprimible, .acta-imprimible * {
          visibility: visible;
        }

        

        .acta-imprimible {
          position: absolute;
        top:    0;    
        left:   0;    
        right:  0;    
        bottom: 0;    
        box-sizing: border-box;
        padding-top:    0mm;  /* altura del logo + pequeño hueco */
        padding-bottom: 0mm;
        }

        .acta-tabla {
        margin-top: 0;
        
      }

       .containerFooterActa {
    position: fixed;
    bottom: 0;            /* justo al límite del área imprimible */
    left: 50%;
    transform: translateX(-50%);
    font-family: Calibri, sans-serif;
    font-size: 12pt;
    text-align: center;
    z-index: 999;
  }

  .acta-tabla tbody.block-group3 {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

        
      }
    `,onAfterPrint:()=>console.log("Impresión del acta completada.")}),s=Q.useReactToPrint({contentRef:M,documentTitle:`Registro_Asistencia_${(o==null?void 0:o.idActividad)||"default"}`,pageStyle:`
    /* Márgenes oficiales */
    @page {
      size: letter landscape;
      margin: 3cm 2.5cm 2.5cm 2.5cm;
      
    }

    @media print {
      /* oculta todo menos el registro */
      body, body * {
        visibility: hidden;
        margin: 0; padding: 0;
      }
      .registro-imprimible, .registro-imprimible * {
        visibility: visible;
      }

      /* área imprimible = exactamente el interior de los márgenes */
      .registro-imprimible {
        position: absolute;
        top:    0;    /* justo 3 cm debajo del tope físico */
        left:   0;    /* justo 2.5 cm a la derecha del borde físico */
        right:  0;    /* deja 2.5 cm a la derecha */
        bottom: 0;    /* deja 2.5 cm arriba del pie físico */
        box-sizing: border-box;
      }

      /* LOGO pegado al margen superior */
      .logoRegistroContainer {
        position: absolute;
        top:    0;    /* arranca al tope del área imprimible */
        left:   50%;
        transform: translateX(-50%);
        max-height: 15mm;
      }

      /* la tabla entra justo bajo el logo */
      .registro-full-table {
        margin-top: 20mm; /* = altura del logo */
      }

      /* FOOTER pegado al margen inferior */
      .containerFooter {
        position: absolute;
        bottom: 0;     /* al límite inferior del área imprimible */
        left:   50%;
        transform: translateX(-50%);
        font-size: 8pt;
      }
    }
  `,onAfterPrint:()=>console.log("Impresión del registro completada.")}),S=x=>{C(x),L(!0),k("actividades")},z=x=>x?new Date(x).toLocaleDateString("es-ES"):"No definida",O=x=>{const R=new Date(x);return{dia:R.getDate(),mes:R.toLocaleString("default",{month:"long"}),anio:R.getFullYear()}},$=x=>{switch(x){case"Pendiente":return e.jsx("span",{className:"estado pendiente",children:"Pendiente"});case"Entregado":return e.jsx("span",{className:"estado completada",children:"Entregado"});case"Calificado":return e.jsx("span",{className:"estado vencida",children:"Calificado"});default:return e.jsx("span",{className:"estado",children:x})}},_=x=>{if(!x.asistentes||x.asistentes.length===0)return"No asignado";const R=x.asistentes.find(H=>H.idInstructor===x.idInstructor);return R?R.nombre:"No asignado"};return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Actividades Complementarias"}),t&&e.jsxs("button",{className:"add-button",onClick:B,children:[e.jsx("span",{className:"icon-plus",children:"+"})," Agregar Actividad Complementaria"]})]}),e.jsx("div",{className:"card-body",children:d?e.jsx("div",{className:"loading-state",children:e.jsx("p",{children:"Cargando actividades..."})}):g?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:g})}):A.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay actividades complementarias asignadas."})}):e.jsx("div",{className:"actividades-grid",children:A.map(x=>e.jsxs("div",{className:"actividad-card",onClick:()=>S(x),children:[e.jsx("h4",{children:x.compromisos&&x.compromisos.length>0?x.compromisos.map(R=>R.actividadDecision).join(", "):"Sin actividad"}),e.jsxs("p",{children:[e.jsx("span",{children:"Fecha Asignación:"})," ",z(x.fecha)]}),e.jsxs("p",{children:[e.jsx("span",{children:"Fecha Entrega:"})," ",x.compromisos&&x.compromisos.length>0?z(x.compromisos[0].fecha):"No definida"]}),e.jsxs("p",{children:[e.jsx("span",{children:"Estado:"})," ",$(x.estado)]}),e.jsxs("p",{children:[e.jsx("span",{children:"Instructor:"})," ",_(x)]}),n(x)&&e.jsxs("div",{className:"actividad-actions",onClick:R=>R.stopPropagation(),children:[e.jsxs("button",{className:"btn-editar",onClick:()=>J(x),children:[e.jsx("span",{className:"icon-edit",children:"✎"})," Editar"]}),e.jsx("button",{className:"btn-eliminar",onClick:()=>E(x),children:"✖ Eliminar"})]})]},x.idActividad))})}),v&&m&&e.jsx(Ce,{actividad:m,onActividadActualizada:V,onClose:()=>{c(!1),h(null)}}),b&&e.jsx("div",{className:"modal-overlay",onClick:()=>E(null),children:e.jsxs("div",{className:"modal-container-delete",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"¿Eliminar actividad?"})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{children:"Esta acción no se puede deshacer."}),p.message&&e.jsx("div",{className:p.type==="error"?"error-message":"success-message",children:p.message})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:()=>{E(null),I({type:"",message:""})},children:"No"}),e.jsx("button",{className:"submit-button",onClick:()=>G(b.idActividad),children:"Sí, eliminar"})]})]})}),T&&o&&e.jsx("div",{className:"modal-overlay",onClick:()=>{L(!1),k("actividades")},children:e.jsxs("div",{className:"modal-container",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsxs("h2",{children:["Detalles de la Actividad #",o.idActividad]})}),e.jsxs("div",{className:"modal-body",children:[D==="actividades"&&e.jsxs("div",{ref:F,className:`acta-imprimible ${D==="actividades"?"slide-in-left":"slide-out-right"}`,children:[e.jsxs("table",{className:"acta-tabla",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:"5",className:"logoActaCell",children:e.jsx("img",{src:Z,alt:"Logo SENA",className:"registro-logo"})})})}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"titulo-principal",children:["ACTA No. ",o.actaNumber||""]})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"fila-celda",children:[e.jsx("strong",{children:"NOMBRE DEL COMITÉ O DE LA REUNIÓN:"})," ",o.nombreComite||""]})}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"CIUDAD Y FECHA:"})," ",o.ciudad||"",","," ",z(o.fecha)]}),e.jsx("td",{className:"fila-celda"}),e.jsxs("td",{className:"fila-celda",children:[e.jsx("strong",{children:"HORA INICIO:"})," ",o.horaInicio||""]}),e.jsxs("td",{className:"fila-celda",children:[e.jsx("strong",{children:"HORA FIN:"})," ",o.horaFin||""]})]}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"LUGAR Y/O ENLACE:"})," ",o.lugarEnlace||""]}),e.jsx("td",{className:"fila-celda"}),e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"DIRECCIÓN / REGIONAL / CENTRO:"})," ",o.direccionRegionalCentro||""]})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"fila-celda",children:[e.jsx("strong",{children:"AGENDA O PUNTOS PARA DESARROLLAR:"}),e.jsx("br",{}),e.jsx("div",{dangerouslySetInnerHTML:{__html:o.agenda}})]})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"fila-celda",children:[e.jsx("strong",{children:"OBJETIVO(S) DE LA REUNIÓN:"}),e.jsx("br",{}),e.jsx("div",{dangerouslySetInnerHTML:{__html:o.objetivos}})]})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"DESARROLLO DE LA REUNIÓN"})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"fila-celda",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:o.desarrollo}})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"CONCLUSIONES"})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"fila-celda",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:o.conclusiones}})})})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"ESTABLECIMIENTO Y ACEPTACIÓN DE COMPROMISOS"})})}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",children:"ACTIVIDAD / DECISIÓN"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"RESPONSABLE"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]}),(((N=o.compromisos)==null?void 0:N.length)>0?o.compromisos:Array(3).fill({})).map((x,R)=>e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",children:x.actividadDecision||""}),e.jsx("td",{children:z(x.fecha)||""}),e.jsx("td",{children:x.responsable||""}),e.jsx("td",{children:x.firmaParticipacion||""})]},R))]}),e.jsxs("tbody",{className:"block-group3",children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"ASISTENTES Y APROBACIÓN DECISIONES"})})}),e.jsxs("tr",{children:[e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"APRUEBA (SI/NO)"}),e.jsx("th",{children:"OBSERVACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]}),(((P=o.asistentes)==null?void 0:P.length)>0?o.asistentes:Array(3).fill({})).map((x,R)=>e.jsxs("tr",{children:[e.jsx("td",{children:x.nombre||""}),e.jsx("td",{children:x.dependenciaEmpresa||""}),e.jsx("td",{children:x.aprueba||""}),e.jsx("td",{children:x.observacion||""}),e.jsx("td",{children:x.firmaParticipacion||""})]},R)),e.jsx("tr",{className:"acta-legal-text",children:e.jsx("td",{colSpan:"5",children:"De acuerdo con la Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})})]})]}),e.jsx("div",{className:"containerFooterActa",children:"GOR-F-084 V02"})]}),D==="registro"&&e.jsxs("div",{ref:M,className:`registro-imprimible ${D==="registro"?"slide-in-left":"slide-out-right"}`,children:[e.jsx("div",{className:"logoRegistroContainer",children:e.jsx("div",{className:"registro-logo-cell",children:e.jsx("img",{src:Z,alt:"Logo SENA",className:"registro-logo"})})}),e.jsxs("table",{className:"registro-full-table",border:"1",cellPadding:"4",cellSpacing:"0",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsxs("th",{colSpan:"11",className:"registro-title-cell",children:["REGISTRO DE ASISTENCIA / DÍA"," ",O(o.fecha).dia,"DEL MES DE"," ",O(o.fecha).mes,"DEL AÑO"," ",O(o.fecha).anio]})}),e.jsx("tr",{children:e.jsxs("th",{colSpan:"11",className:"registro-objetivo-cell",children:[e.jsx("strong",{children:"OBJETIVO(S):"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:o.objetivos}})]})}),e.jsxs("tr",{children:[e.jsx("th",{children:"N°"}),e.jsx("th",{children:"NOMBRES Y APELLIDOS"}),e.jsx("th",{children:"No. DOCUMENTO"}),e.jsx("th",{children:"PLANTA"}),e.jsx("th",{children:"CONTRATISTA"}),e.jsx("th",{children:"OTRO / ¿CUÁL?"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"CORREO ELECTRÓNICO"}),e.jsx("th",{children:"TELÉFONO/EXT."}),e.jsx("th",{children:"AUTORIZA GRABACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})]}),e.jsx("tbody",{children:(o.asistentes||[]).map((x,R)=>e.jsxs("tr",{children:[e.jsx("td",{children:R+1}),e.jsx("td",{children:x.nombre}),e.jsx("td",{children:x.numeroDocumento}),e.jsx("td",{children:x.planta}),e.jsx("td",{children:x.contratista}),e.jsx("td",{children:x.otro}),e.jsx("td",{children:x.dependenciaEmpresa}),e.jsx("td",{children:x.correoElectronico}),e.jsx("td",{children:x.telefonoExt}),e.jsx("td",{children:x.autorizaGrabacion?"SÍ":"NO"}),e.jsx("td",{children:x.firmaParticipacion})]},R))})]}),e.jsx("div",{className:"regisro-legal-text",children:e.jsx("p",{children:"De acuerdo con la Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})}),e.jsx("div",{className:"containerFooter",children:e.jsx("div",{className:"registro-version",children:e.jsx("p",{children:"GOR-F-085 V02"})})})]}),e.jsx("div",{className:"modal-navigation",children:D==="actividades"?e.jsx("button",{className:"nav-button",onClick:()=>k("registro"),children:"→ Registro de Asistencia"}):e.jsx("button",{className:"nav-button",onClick:()=>k("actividades"),children:"← Actividades Complementarias"})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:()=>{L(!1),k("actividades")},children:"Cerrar"}),D==="actividades"?e.jsx(e.Fragment,{children:e.jsx("button",{className:"submit-button",onClick:a,children:"Imprimir Acta"})}):e.jsx(e.Fragment,{children:e.jsx("button",{className:"submit-button",onClick:s,children:"Imprimir Registro"})})]})]})]})})]})},Se=()=>{const t=q(),{idAprendiz:j}=K(),A=ee(),[r,d]=i.useState({idInstructor:null,actaNumber:"",nombreComite:"",ciudad:"Armenia",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaFin:"",lugarEnlace:"",direccionRegionalCentro:sessionStorage.getItem("regional")||"Centro de Comercio y Turismo",agenda:"",objetivos:"",desarrollo:"",conclusiones:"",estado:"Pendiente",compromisosPlan:[{planDecision:"",fecha:"",responsable:"",firmaParticipacion:""}],asistentesPlan:[{nombre:"",numeroDocumento:"",correoElectronico:"",telefonoExt:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}],version:"02",codigo:"GOR-F-084"}),[l,g]=i.useState(!1),[u,m]=i.useState(null),[h,v]=i.useState(!1),[c,b]=i.useState(!1),[E,p]=i.useState([]),[I,y]=i.useState(null),f={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]};i.useEffect(()=>{(async()=>{var a,s;try{const S=sessionStorage.getItem("token"),z=sessionStorage.getItem("idUsuario");if(!S||!z){m("No hay token de autenticación o ID de usuario disponible"),t("/login");return}const O=await w.get(`http://localhost:8080/instructores/usuario/${z}`,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}});d($=>({...$,idInstructor:O.data.idInstructor,asistentesPlan:[{nombre:`${O.data.nombres} ${O.data.apellidos}`,numeroDocumento:O.data.numeroDocente||"",correoElectronico:O.data.correo||"",telefonoExt:O.data.telefono||"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"Instructor",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}]}))}catch(S){console.error("Error al obtener datos del instructor:",S),S.response&&S.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error al cargar datos del instructor: ${((s=(a=S.response)==null?void 0:a.data)==null?void 0:s.message)||S.message}`)}})()},[t]),i.useEffect(()=>{j&&(async()=>{var a,s;try{const S=sessionStorage.getItem("token");if(!S||!j){m("No hay token de autenticación o ID de aprendiz disponible"),t("/aprendices");return}const O=(await w.get(`http://localhost:8080/aprendices/${j}`,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}})).data;y(O),d($=>({...$,asistentesPlan:[...$.asistentesPlan,{nombre:`${O.nombres} ${O.apellidos}`,numeroDocumento:O.documento||"",correoElectronico:O.correo||"",telefonoExt:O.telefono||"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"Aprendiz",aprueba:"SÍ",observacion:"",autorizaGrabacion:!1,firmaParticipacion:""}]}))}catch(S){console.error("Error al obtener datos del aprendiz:",S),S.response&&S.response.status===404?(m("No se encontró un aprendiz con el ID proporcionado."),setTimeout(()=>t("/aprendices"),3e3)):S.response&&S.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error al cargar datos del aprendiz: ${((s=(a=S.response)==null?void 0:a.data)==null?void 0:s.message)||S.message}`)}})()},[j,t]),i.useEffect(()=>{if(A.state&&A.state.actividadGenerada&&I){const{actividadGenerada:n}=A.state;if(console.log("Datos recibidos de location.state:",n),n.tipoDocumento!=="plan de mejoramiento"){m("Este formulario solo acepta planes de mejoramiento generados por el chatbot.");return}const a=s=>s?s.split(`
`).map(S=>`<p>${S.trim()}</p>`).join(""):"";d(s=>({...s,nombreComite:n.nombreComite||s.nombreComite,agenda:a(n.agenda)||s.agenda,objetivos:a(n.objetivos)||s.objetivos,desarrollo:a(n.desarrollo)||s.desarrollo,conclusiones:a(n.conclusiones)||s.conclusiones,compromisosPlan:[{planDecision:"",fecha:s.fecha,responsable:`${I.nombres} ${I.apellidos}`,firmaParticipacion:""}]}))}},[A.state,I]);const o=(n,a,s)=>{const{name:S,value:z,type:O,checked:$}=n.target,_=O==="checkbox"?$:z;d(s?N=>{const P=[...N[s]];return P[a]={...P[a],[S]:_},{...N,[s]:P}}:N=>({...N,[S]:_}))},C=new Date().toISOString().split("T")[0],L=(n=>{const a=new Date(n);return{dia:a.getDate(),mes:a.toLocaleString("default",{month:"long"}),anio:a.getFullYear()}})(r.fecha),D=(n,a)=>{const{name:s,value:S,type:z,checked:O}=n.target,$=z==="checkbox"?O:S;p(_=>{const N=[..._];return N[a]={...N[a],[s]:$},N})},k=()=>{d(n=>({...n,asistentesPlan:[...n.asistentesPlan,{nombre:"",numeroDocumento:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",correoElectronico:"",telefonoExt:"",autorizaGrabacion:!1,aprueba:"SÍ",observacion:"",firmaParticipacion:""}]}))},F=n=>{d(a=>{const s=[...a.asistentesPlan];return n>=2&&s.splice(n,1),{...a,asistentesPlan:s}})},M=()=>{p(n=>[...n,{nombre:"",numeroDocumento:"",planta:"",contratista:"",otro:"",dependenciaEmpresa:"",correoElectronico:"",telefonoExt:"",autorizaGrabacion:!1,firmaParticipacion:""}])},B=()=>{try{if(r.asistentesPlan.some(a=>!a.nombre||!a.dependenciaEmpresa)){m("Por favor, completa los campos Nombre y Dependencia/Empresa para todos los asistentes antes de continuar.");return}p(r.asistentesPlan.map(a=>({nombre:a.nombre,numeroDocumento:a.numeroDocumento,planta:a.planta,contratista:a.contratista,otro:a.otro,dependenciaEmpresa:a.dependenciaEmpresa,correoElectronico:a.correoElectronico,telefonoExt:a.telefonoExt,autorizaGrabacion:a.autorizaGrabacion,firmaParticipacion:a.firmaParticipacion}))),b(!0)}catch(n){console.error("Error al abrir el modal:",n),m("Error al abrir el modal de registro de asistencia. Por favor, intenta nuevamente.")}},V=()=>{if(E.some(a=>!a.nombre||!a.numeroDocumento||!a.firmaParticipacion)){m("Todos los campos obligatorios (Nombre, Número de Documento y Firma) deben estar llenos.");return}d(a=>({...a,asistentesPlan:E.map(s=>({...s,aprueba:s.aprueba||"SÍ",observacion:s.observacion||""}))})),b(!1),J()},J=async()=>{var n,a;g(!0),m(null);try{const s=sessionStorage.getItem("token");if(!s){m("No se ha identificado al instructor"),g(!1);return}const S=await w.post(`http://localhost:8080/planMejoramientos/${j}`,r,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});v(!0),setTimeout(()=>{v(!1),t(`/aprendices/${j}`)},2e3)}catch(s){console.error("Error al guardar el plan:",s),s.response&&s.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),sessionStorage.clear(),t("/login")):m(`Error: ${((a=(n=s.response)==null?void 0:n.data)==null?void 0:a.message)||s.message}`)}finally{g(!1)}},G=(n,a)=>{d(s=>({...s,[n]:a}))};return e.jsxs("div",{className:"formato-sena-container",children:[e.jsxs("div",{className:"header-with-logo",children:[e.jsx("img",{src:Z,alt:"Logo SENA",className:"sena-logo"}),e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"PLAN DE MEJORAMIENTO"]})]}),e.jsxs("form",{onSubmit:n=>{n.preventDefault(),B()},className:"sena-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ACTA No."}),e.jsx("input",{type:"text",name:"actaNumber",value:r.actaNumber,onChange:o,placeholder:"Número de acta",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"NOMBRE DEL COMITÉ O DEL PLAN"}),e.jsx("input",{type:"text",name:"nombreComite",value:r.nombreComite,onChange:o,placeholder:"Nombre del comité o plan",required:!0})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CIUDAD Y FECHA"}),e.jsxs("div",{className:"form-group-pair",children:[e.jsx("input",{type:"text",name:"ciudad",value:r.ciudad,onChange:o,placeholder:"Ciudad",required:!0}),e.jsx("input",{type:"date",name:"fecha",value:r.fecha,onChange:o,required:!0,min:C})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA INICIO"}),e.jsx("input",{type:"time",name:"horaInicio",value:r.horaInicio,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HORA FIN"}),e.jsx("input",{type:"time",name:"horaFin",value:r.horaFin,onChange:o,required:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"LUGAR Y/O ENLACE"}),e.jsx("input",{type:"text",name:"lugarEnlace",value:r.lugarEnlace,onChange:o,placeholder:"Lugar o enlace del plan",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DIRECCIÓN / REGIONAL / CENTRO"}),e.jsx("input",{type:"text",name:"direccionRegionalCentro",value:r.direccionRegionalCentro,onChange:o,required:!0})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"AGENDA O PUNTOS PARA DESARROLLAR"}),e.jsx(Y,{theme:"snow",modules:f,value:r.agenda,onChange:n=>G("agenda",n),placeholder:"Describa la agenda o puntos a desarrollar..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"OBJETIVO(S) DEL PLAN"}),e.jsx(Y,{theme:"snow",modules:f,value:r.objetivos,onChange:n=>G("objetivos",n),placeholder:"Describa los objetivos del plan..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"DESARROLLO DEL PLAN"}),e.jsx(Y,{theme:"snow",modules:f,value:r.desarrollo,onChange:n=>G("desarrollo",n),placeholder:"Describa el desarrollo del plan..."})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"CONCLUSIONES"}),e.jsx(Y,{theme:"snow",modules:f,value:r.conclusiones,onChange:n=>G("conclusiones",n),placeholder:"Describa las conclusiones del plan..."})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ESTABLECIMIENTO Y ACEPTACIÓN DE COMPROMISOS"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ACTIVIDAD / DECISIÓN"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"RESPONSABLE"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})}),e.jsx("tbody",{children:r.compromisosPlan.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"planDecision",value:n.planDecision,onChange:s=>o(s,a,"compromisosPlan"),placeholder:"Actividad o decisión"})}),e.jsx("td",{children:e.jsx("input",{type:"date",name:"fecha",value:n.fecha,onChange:s=>o(s,a,"compromisosPlan"),min:C})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"responsable",value:n.responsable,onChange:s=>o(s,a,"compromisosPlan"),placeholder:"Nombre del responsable",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>o(s,a,"compromisosPlan"),placeholder:"Firma o participación virtual"})})]},a))})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ASISTENTES Y APROBACIÓN DECISIONES"}),e.jsxs("table",{className:"sena-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"APRUEBA (SÍ/NO)"}),e.jsx("th",{children:"OBSERVACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"}),e.jsx("th",{children:"Eliminar"})]})}),e.jsx("tbody",{children:r.asistentesPlan.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:s=>o(s,a,"asistentesPlan"),placeholder:"Nombre completo",readOnly:a<2})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"dependenciaEmpresa",value:n.dependenciaEmpresa,onChange:s=>o(s,a,"asistentesPlan"),placeholder:"Dependencia o empresa",readOnly:a<2})}),e.jsx("td",{children:e.jsxs("select",{name:"aprueba",value:n.aprueba,onChange:s=>o(s,a,"asistentesPlan"),children:[e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"observacion",value:n.observacion,onChange:s=>o(s,a,"asistentesPlan"),placeholder:"Observaciones"})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>o(s,a,"asistentesPlan"),placeholder:"Firma o participación virtual"})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"delete-row-button",disabled:a<2,onClick:()=>{a<2?alert("No se puede eliminar al instructor ni al aprendiz"):F(a)},title:a<2?"No se puede eliminar":"Eliminar asistente",children:"❌"})})]},a))})]}),e.jsx("button",{type:"button",className:"add-row-button",onClick:k,children:"Agregar Asistente"})]}),e.jsx("div",{className:"form-section",children:e.jsx("p",{className:"legal-note",children:"De acuerdo con La Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA, se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})}),e.jsx("div",{className:"document-footer",children:e.jsxs("span",{className:"codigo",children:["Código: ",r.codigo]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>t(`/aprendices/${j}`),disabled:l,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:l?"Avanzando":"Siguiente"})]})]}),u&&e.jsx("div",{className:"error-message",children:u}),c&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"header-with-logo",children:[e.jsx("img",{src:Z,alt:"Logo SENA",className:"sena-logo"}),e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"REGISTRO DE ASISTENCIA"]})]}),e.jsxs("div",{className:"document-header",children:[e.jsxs("span",{children:["DÍA: ",L.dia]}),e.jsxs("span",{children:["MES: ",L.mes]}),e.jsxs("span",{children:["AÑO: ",L.anio]})]}),e.jsx("div",{className:"form-section",children:e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"OBJETIVO(S)"}),e.jsx(Y,{theme:"snow",modules:f,value:r.objetivos,onChange:n=>G("objetivos",n),placeholder:"Describa los objetivos del plan...",readOnly:!0})]})})}),e.jsxs("div",{className:"form-section1",children:[e.jsx("h3",{children:"ASISTENTES"}),e.jsxs("table",{className:"sena-table1",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"N°"}),e.jsx("th",{children:"NOMBRES Y APELLIDOS"}),e.jsx("th",{children:"N°. DOCUMENTO"}),e.jsx("th",{children:"PLANTA"}),e.jsx("th",{children:"CONTRATISTA"}),e.jsx("th",{children:"OTRO"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"CORREO ELECTRÓNICO"}),e.jsx("th",{children:"TELÉFONO / EXT."}),e.jsx("th",{children:"AUTORIZA GRABACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"}),e.jsx("th",{children:"Eliminar"})]})}),e.jsx("tbody",{children:E.map((n,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:s=>D(s,a),placeholder:"Nombres y apellidos",required:!0,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"numeroDocumento",value:n.numeroDocumento,onChange:s=>D(s,a),placeholder:"Número de documento",required:!0,readOnly:a<2})}),e.jsx("td",{children:e.jsxs("select",{name:"planta",value:n.planta,onChange:s=>D(s,a),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione"}),e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsxs("select",{name:"contratista",value:n.contratista,onChange:s=>D(s,a),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione"}),e.jsx("option",{value:"SÍ",children:"SÍ"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"otro",value:n.otro,onChange:s=>D(s,a),placeholder:"Otro"})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"dependenciaEmpresa",value:n.dependenciaEmpresa,onChange:s=>D(s,a),placeholder:"Dependencia o empresa",required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"email",name:"correoElectronico",value:n.correoElectronico,onChange:s=>D(s,a),placeholder:"Correo electrónico",required:!0,readOnly:a<2})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"telefonoExt",value:n.telefonoExt,onChange:s=>D(s,a),placeholder:"Teléfono o extensión",readOnly:a<2,required:!0})}),e.jsx("td",{children:e.jsx("input",{type:"checkbox",name:"autorizaGrabacion",checked:n.autorizaGrabacion,onChange:s=>D(s,a)})}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"firmaParticipacion",value:n.firmaParticipacion,onChange:s=>D(s,a),placeholder:"Firma o participación virtual",required:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"delete-row-button",onClick:()=>{a<2||p(s=>{const S=[...s];return S.splice(a,1),S})},disabled:a<2,title:a<2?"No se puede eliminar":"Eliminar este asistente",children:"❌"})})]},a))})]}),e.jsx("button",{type:"button",className:"add-row-button",onClick:M,children:"Agregar Asistente"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>b(!1),disabled:l,children:"Cancelar"}),e.jsx("button",{type:"button",className:"submit-button",onClick:V,disabled:l,children:l?"Guardando...":"Confirmar y Guardar"})]})]})}),h&&e.jsx("div",{className:"success-modal-overlay",children:e.jsx("div",{className:"success-modal-content",children:e.jsx("h2",{children:"¡Plan de mejoramiento guardado exitosamente!"})})})]})},Ie=({idAprendiz:t})=>{var $,_;const j=q(),[A,r]=i.useState([]),[d,l]=i.useState(!0),[g,u]=i.useState(null),[m,h]=i.useState(null),[v,c]=i.useState(!1),[b,E]=i.useState(null),[p,I]=i.useState({type:"",message:""}),[y,f]=i.useState(null),[o,C]=i.useState(null),[T,L]=i.useState(!1),[D,k]=i.useState("actividades"),F=i.useRef(),M=i.useRef();i.useEffect(()=>{const N=P=>{P.key==="Escape"&&(L(!1),c(!1),k("actividades"))};return(T||v)&&document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[T,v]),i.useEffect(()=>{if(!t||isNaN(t)){u("ID de aprendiz inválido."),l(!1);return}(async()=>{try{l(!0);const P=sessionStorage.getItem("token");if(!P){j("/login");return}const x=await w.get(`http://localhost:8080/planMejoramientos/${t}`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});console.log("Planes recibidos:",x.data),r(x.data),u(null)}catch(P){console.error("Error al cargar planes:",P),u("Error al cargar los planes de mejoramiento.")}finally{l(!1)}})()},[t,j]),i.useEffect(()=>{(async()=>{try{const P=sessionStorage.getItem("token"),x=sessionStorage.getItem("idUsuario");if(!P||!x)return;const R=await w.get(`http://localhost:8080/instructores/usuario/${x}`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});f(R.data)}catch(P){console.error("Error al obtener datos del instructor:",P)}})()},[]);const B=N=>!sessionStorage.getItem("idUsuario")||!y||!y.idInstructor?!1:N.idInstructor===y.idInstructor,V=()=>{if(!t||isNaN(t)){u("ID de aprendiz inválido. No se puede agregar plan.");return}j(`/agregar-plan/${t}`)},J=N=>{r(P=>P.map(x=>x.idPlanMejoramiento===N.idPlanMejoramiento?N:x)),c(!1),h(null)},G=N=>{h(N),c(!0)},n=async N=>{try{const P=sessionStorage.getItem("token");if(!P)throw new Error("Sin token de autenticación");const x=await w.delete(`http://localhost:8080/planMejoramiento/${t}/${N}`,{headers:{Authorization:`Bearer ${P}`}});x.status>=200&&x.status<300?(r(R=>R.filter(H=>H.idPlanMejoramiento!==N)),setTimeout(()=>{E(null),I({type:"success",message:"Plan eliminado con éxito."})},2e3)):setTimeout(()=>{E(null),I({type:"error",message:"No se pudo eliminar el plan."})},2e3)}catch(P){console.error("Error al eliminar plan:",P),I({type:"error",message:"Error al eliminar el plan de mejoramiento."})}},a=Q.useReactToPrint({contentRef:F,documentTitle:`ActaPlan_${(o==null?void 0:o.idPlanMejoramiento)||"default"}`,pageStyle:`
      @page {
        size: letter portrait;
        margin: 3cm 2.5cm 2.5cm 2.5cm;
      }
      @media print {
        body * {
          visibility: hidden;
        }
        .acta-imprimible, .acta-imprimible * {
          visibility: visible;
        }
        .acta-imprimible {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          box-sizing: border-box;
          padding-top: 0mm;
          padding-bottom: 0mm;
        }

        .acta-tabla {
          margin-top: 0;
        }

        .containerFooterActa {
          position: fixed;
          bottom: 0;
          left: 50%;
          transform: translateX(-50%);
          font-family: Calibri, sans-serif;
          font-size: 12pt;
          text-align: center;
          z-index: 999;
        }

        .acta-tabla tbody.block-group3 {
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }
      }
    `,onAfterPrint:()=>console.log("Impresión del acta completada.")}),s=Q.useReactToPrint({contentRef:M,documentTitle:`Registro_Asistencia_${(o==null?void 0:o.idPlanMejoramiento)||"default"}`,pageStyle:`
      /* Márgenes oficiales */
      @page {
        size: letter landscape;
        margin: 3cm 2.5cm 2.5cm 2.5cm;
      }

      @media print {
        /* oculta todo menos el registro */
        body, body * {
          visibility: hidden;
          margin: 0;
          padding: 0;
        }
        .registro-imprimible, .registro-imprimible * {
          visibility: visible;
        }

        /* área imprimible = exactamente el interior de los márgenes */
        .registro-imprimible {
          position: absolute;
          top: 0;    /* justo 3 cm debajo del tope físico */
          left: 0;   /* justo 2.5 cm a la derecha del borde físico */
          right: 0;  /* deja 2.5 cm a la derecha */
          bottom: 0; /* deja 2.5 cm arriba del pie físico */
          box-sizing: border-box;
        }

        /* LOGO pegado al margen superior */
        .logoRegistroContainer {
          position: absolute;
          top: 0;    /* arranca al tope del área imprimible */
          left: 50%;
          transform: translateX(-50%);
          max-height: 15mm;
        }

        /* la tabla entra justo bajo el logo */
        .registro-full-table {
          margin-top: 20mm; /* = altura del logo */
        }

        /* FOOTER pegado al margen inferior */
        .containerFooter {
          position: absolute;
          bottom: 0;   /* al límite inferior del área imprimible */
          left: 50%;
          transform: translateX(-50%);
          font-size: 8pt;
        }
      }
    `,onAfterPrint:()=>console.log("Impresión del registro completada.")}),S=N=>{C(N),L(!0),k("actividades")},z=N=>N?new Date(N).toLocaleDateString("es-ES"):"No definida",O=N=>{const P=new Date(N);return{dia:P.getDate(),mes:P.toLocaleString("default",{month:"long"}),anio:P.getFullYear()}};return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Planes de Mejoramiento"}),e.jsxs("button",{className:"add-button",onClick:V,children:[e.jsx("span",{className:"icon-plus",children:"+"})," Agregar Plan de Mejoramiento"]})]}),e.jsx("div",{className:"card-body",children:d?e.jsx("div",{className:"loading-state",children:e.jsx("p",{children:"Cargando planes..."})}):g?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:g})}):A.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay planes de mejoramiento asignados."})}):e.jsx("div",{className:"actividades-grid",children:A.map(N=>e.jsxs("div",{className:"actividad-card",onClick:()=>S(N),children:[e.jsx("h4",{children:N.nombreComite||"Sin comité"}),e.jsxs("p",{children:[e.jsx("span",{children:"Fecha:"})," ",z(N.fecha)]}),e.jsxs("p",{children:[e.jsx("span",{children:"Estado:"})," ",N.estado]}),B(N)&&e.jsxs("div",{className:"actividad-actions",onClick:P=>P.stopPropagation(),children:[e.jsxs("button",{className:"btn-editar",onClick:()=>G(N),children:[e.jsx("span",{className:"icon-edit",children:"✎"})," Editar"]}),e.jsx("button",{className:"btn-eliminar",onClick:()=>E(N),children:"✖ Eliminar"})]})]},N.idPlanMejoramiento))})}),v&&m&&e.jsx(EditarPlanMejoramiento,{plan:m,onClose:()=>{c(!1),h(null)},onUpdated:J}),b&&e.jsx("div",{className:"modal-overlay",onClick:()=>{E(null),I({type:"",message:""})},children:e.jsxs("div",{className:"modal-container-delete",onClick:N=>N.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"¿Eliminar plan de mejoramiento?"})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{children:"Esta acción no se puede deshacer."}),p.message&&e.jsx("div",{className:p.type==="error"?"error-message":"success-message",children:p.message})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:()=>{E(null),I({type:"",message:""})},children:"No"}),e.jsx("button",{className:"submit-button",onClick:()=>n(b.idPlanMejoramiento),children:"Sí, eliminar"})]})]})}),T&&o&&e.jsx("div",{className:"modal-overlay",onClick:()=>{L(!1),k("actividades")},children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsxs("h2",{children:["Acta Plan #",o.actaNumber]})}),e.jsxs("div",{className:"modal-body",children:[D==="actividades"&&e.jsxs("div",{ref:F,className:`acta-imprimible ${D==="actividades"?"slide-in-left":"slide-out-right"}`,children:[e.jsxs("table",{className:"acta-tabla",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:"5",className:"logoActaCell",children:e.jsx("img",{src:Z,alt:"Logo SENA",className:"registro-logo"})})})}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"titulo-principal",children:["ACTA No. ",o.actaNumber]})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"fila-celda",children:[e.jsx("strong",{children:"COMITÉ:"})," ",o.nombreComite]})}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"CIUDAD Y FECHA:"})," ",o.ciudad,","," ",new Date(o.fecha).toLocaleDateString("es-ES")]}),e.jsx("td",{className:"fila-celda"}),e.jsxs("td",{className:"fila-celda",children:[e.jsx("strong",{children:"INICIO:"})," ",o.horaInicio]}),e.jsxs("td",{className:"fila-celda",children:[e.jsx("strong",{children:"FIN:"})," ",o.horaFin]})]}),(o.lugarEnlace||o.direccionRegionalCentro)&&e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"LUGAR Y/O ENLACE:"})," ",o.lugarEnlace||""]}),e.jsx("td",{className:"fila-celda"}),e.jsxs("td",{colSpan:"2",className:"fila-celda",children:[e.jsx("strong",{children:"DIRECCIÓN / REGIONAL / CENTRO:"})," ",o.direccionRegionalCentro||""]})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"fila-celda",children:[e.jsx("strong",{children:"OBJETIVOS:"}),e.jsx("br",{}),e.jsx("div",{dangerouslySetInnerHTML:{__html:o.objetivos}})]})}),o.desarrollo&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"DESARROLLO DE LA REUNIÓN"})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"fila-celda",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:o.desarrollo}})})})]}),o.conclusiones&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"CONCLUSIONES"})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"fila-celda",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:o.conclusiones}})})})]})]}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"ESTABLECIMIENTO Y ACEPTACIÓN DE COMPROMISOS"})})}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",children:"ACTIVIDAD / DECISIÓN"}),e.jsx("th",{children:"FECHA"}),e.jsx("th",{children:"RESPONSABLE"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]}),((($=o.compromisosPlan)==null?void 0:$.length)>0?o.compromisosPlan:Array(3).fill({})).map((N,P)=>e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",children:N.planDecision||""}),e.jsx("td",{children:N.fecha?new Date(N.fecha).toLocaleDateString("es-ES"):""}),e.jsx("td",{children:N.responsable||""}),e.jsx("td",{children:N.firmaParticipacion||""})]},P))]}),e.jsxs("tbody",{className:"block-group3",children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"seccion-central",children:e.jsx("strong",{children:"ASISTENTES Y APROBACIÓN DECISIONES"})})}),e.jsxs("tr",{children:[e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"APRUEBA (SI/NO)"}),e.jsx("th",{children:"OBSERVACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]}),(((_=o.asistentesPlan)==null?void 0:_.length)>0?o.asistentesPlan:Array(3).fill({})).map((N,P)=>e.jsxs("tr",{children:[e.jsx("td",{children:N.nombre||""}),e.jsx("td",{children:N.dependenciaEmpresa||""}),e.jsx("td",{children:N.aprueba||""}),e.jsx("td",{children:N.observacion||""}),e.jsx("td",{children:N.firmaParticipacion||""})]},P)),e.jsx("tr",{className:"acta-legal-text",children:e.jsx("td",{colSpan:"5",children:"De acuerdo con la Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})})]})]}),e.jsx("div",{className:"containerFooterActa",children:"GOR-F-084 V02"})]}),D==="registro"&&e.jsxs("div",{ref:M,className:`registro-imprimible ${D==="registro"?"slide-in-left":"slide-out-right"}`,children:[e.jsx("div",{className:"logoRegistroContainer",children:e.jsx("img",{src:Z,alt:"Logo SENA",className:"registro-logo"})}),e.jsxs("table",{className:"registro-full-table",border:"1",cellPadding:"4",cellSpacing:"0",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsxs("th",{colSpan:"11",className:"registro-title-cell",children:["REGISTRO DE ASISTENCIA / DÍA"," ",O(o.fecha).dia," DEL MES DE"," ",O(o.fecha).mes," DEL AÑO"," ",O(o.fecha).anio]})}),e.jsx("tr",{children:e.jsxs("th",{colSpan:"11",className:"registro-objetivo-cell",children:[e.jsx("strong",{children:"OBJETIVO(S):"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:o.objetivos}})]})}),e.jsxs("tr",{children:[e.jsx("th",{children:"N°"}),e.jsx("th",{children:"NOMBRES Y APELLIDOS"}),e.jsx("th",{children:"No. DOCUMENTO"}),e.jsx("th",{children:"PLANTA"}),e.jsx("th",{children:"CONTRATISTA"}),e.jsx("th",{children:"OTRO / ¿CUÁL?"}),e.jsx("th",{children:"DEPENDENCIA / EMPRESA"}),e.jsx("th",{children:"CORREO ELECTRÓNICO"}),e.jsx("th",{children:"TELÉFONO/EXT."}),e.jsx("th",{children:"AUTORIZA GRABACIÓN"}),e.jsx("th",{children:"FIRMA O PARTICIPACIÓN VIRTUAL"})]})]}),e.jsx("tbody",{children:(o.asistentesPlan||[]).map((N,P)=>e.jsxs("tr",{children:[e.jsx("td",{children:P+1}),e.jsx("td",{children:N.nombre}),e.jsx("td",{children:N.numeroDocumento}),e.jsx("td",{children:N.planta}),e.jsx("td",{children:N.contratista}),e.jsx("td",{children:N.otro}),e.jsx("td",{children:N.dependenciaEmpresa}),e.jsx("td",{children:N.correoElectronico}),e.jsx("td",{children:N.telefonoExt}),e.jsx("td",{children:N.autorizaGrabacion?"SÍ":"NO"}),e.jsx("td",{children:N.firmaParticipacion})]},P))})]}),e.jsx("div",{className:"regisro-legal-text",children:e.jsx("p",{children:"De acuerdo con la Ley 1581 de 2012, Protección de Datos Personales, el Servicio Nacional de Aprendizaje SENA se compromete a garantizar la seguridad y protección de los datos personales que se encuentran almacenados en este documento, y les dará el tratamiento correspondiente en cumplimiento de lo establecido legalmente."})}),e.jsx("div",{className:"containerFooter",children:e.jsx("div",{className:"registro-version",children:e.jsx("p",{children:"GOR-F-085 V02"})})})]}),e.jsx("div",{className:"modal-navigation",children:D==="actividades"?e.jsx("button",{className:"nav-button",onClick:()=>k("registro"),children:"→ Registro de Asistencia"}):e.jsx("button",{className:"nav-button",onClick:()=>k("actividades"),children:"← Actividades Complementarias"})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-button",onClick:()=>{L(!1),k("actividades")},children:"Cerrar"}),D==="actividades"?e.jsx("button",{className:"submit-button",onClick:a,children:"Imprimir Acta"}):e.jsx("button",{className:"submit-button",onClick:s,children:"Imprimir Registro"})]})]})})]})},ye=({onComentarioAgregado:t})=>{const j=q(),{idAprendiz:A}=K(),[r,d]=i.useState({fechaComentario:new Date().toISOString().split("T")[0],comentario:"",nombreInstructor:""}),[l,g]=i.useState(!1),[u,m]=i.useState(null),[h,v]=i.useState(!1),[c,b]=i.useState(!1);i.useEffect(()=>{(async()=>{var f,o;try{const C=sessionStorage.getItem("token"),T=sessionStorage.getItem("idUsuario");if(!C||!T){m("No hay token de autenticación o ID de usuario disponible"),b(!0),j("/login");return}const L=await w.get(`http://localhost:8080/instructores/usuario/${T}`,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});d(D=>({...D,nombreInstructor:`${L.data.nombres} ${L.data.apellidos}`}))}catch(C){console.error("Error al obtener datos del instructor:",C),C.response&&C.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),b(!0),sessionStorage.clear(),j("/login")):(m(`Error al cargar datos del instructor: ${((o=(f=C.response)==null?void 0:f.data)==null?void 0:o.message)||C.message}`),b(!0))}})()},[j]);const E=y=>{const{name:f,value:o}=y.target;d(C=>({...C,[f]:o}))},p=async y=>{var f,o;y.preventDefault(),g(!0),m(null),v(!1);try{const C=sessionStorage.getItem("token");if(!C||!A){m("Faltan datos de autenticación o ID de aprendiz."),b(!0),g(!1);return}const T=await w.post(`http://localhost:8080/comentarios/${A}`,{idAprendiz:A,fechaComentario:r.fechaComentario,comentario:r.comentario},{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});v(!0),b(!0),setTimeout(()=>{b(!1),t?t(T.data):j(`/aprendices/${A}`)},2e3)}catch(C){console.error("Error al guardar comentario:",C),C.response&&C.response.status===401?(m("Sesión expirada. Por favor, inicie sesión nuevamente."),b(!0),sessionStorage.clear(),j("/login")):(m(`Error: ${((o=(f=C.response)==null?void 0:f.data)==null?void 0:o.message)||C.message}`),b(!0))}finally{g(!1)}},I=()=>{b(!1),m(null),v(!1)};return e.jsxs("div",{className:"formato-sena-container",children:[e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"SISTEMA INTEGRADO DE GESTIÓN",e.jsx("br",{}),"Comentario"]}),e.jsxs("form",{onSubmit:p,className:"sena-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Agregar Comentario"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fecha del Comentario"}),e.jsx("input",{type:"date",name:"fechaComentario",value:r.fechaComentario,onChange:E,required:!0,min:new Date().toISOString().split("T")[0],disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Instructor"}),e.jsx("input",{type:"text",name:"idInstructor",value:r.nombreInstructor,readOnly:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"Comentario"}),e.jsx("textarea",{name:"comentario",value:r.comentario,onChange:E,placeholder:"Escribe el comentario detalladamente..."})]})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>j(`/aprendices/${A}/comentarios`),disabled:l||c,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l||c,children:l?"Guardando...":"Guardar Comentario"})]})]}),c&&e.jsx("div",{className:"modal-overlay",onClick:I,children:e.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:[u&&e.jsx("p",{className:"modal-error",children:u}),h&&e.jsx("p",{className:"modal-success",children:"Comentario guardado exitosamente!"})]})})]})},re=({comentario:t,onComentarioActualizado:j,onClose:A})=>{const[r,d]=i.useState({fechaComentario:t.fechaComentario.split("T")[0],comentario:t.comentario}),[l,g]=i.useState(!1),[u,m]=i.useState(null),[h,v]=i.useState(!1),c=E=>{const{name:p,value:I}=E.target;d(y=>({...y,[p]:I}))},b=async E=>{var p,I;E.preventDefault(),g(!0),m(null),v(!1);try{const y=sessionStorage.getItem("token");if(!y)throw new Error("Sin token de autenticación");const f=`http://localhost:8080/comentarios/${t.idAprendiz}/${t.idComentario}`,o=await w.put(f,{fechaComentario:r.fechaComentario,comentario:r.comentario},{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});v(!0),j(o.data)}catch(y){console.error("Error al actualizar comentario:",y),m(((I=(p=y.response)==null?void 0:p.data)==null?void 0:I.message)||"Error al actualizar el comentario.")}finally{g(!1)}};return e.jsxs("div",{className:"formato-sena-container",children:[e.jsxs("h1",{className:"document-title",children:["SERVICIO NACIONAL DE APRENDIZAJE SENA",e.jsx("br",{}),"SISTEMA INTEGRADO DE GESTIÓN",e.jsx("br",{}),"Editar Comentario"]}),e.jsxs("form",{onSubmit:b,className:"sena-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Editar Comentario"}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fecha del Comentario"}),e.jsx("input",{type:"date",name:"fechaComentario",value:r.fechaComentario,onChange:c,required:!0,disabled:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group wide",children:[e.jsx("label",{children:"Comentario"}),e.jsx("textarea",{name:"comentario",value:r.comentario,onChange:c,rows:5,placeholder:"Escribe el comentario detalladamente...",required:!0})]})})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:A,disabled:l,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:l?"Guardando...":"Actualizar Comentario"})]})]}),u&&e.jsx("div",{className:"error-message",children:u}),h&&e.jsx("div",{className:"success-message",children:"Comentario actualizado exitosamente!"})]})},oe=({idAprendiz:t})=>{const j=q(),[A,r]=i.useState([]),[d,l]=i.useState(!0),[g,u]=i.useState(null),[m,h]=i.useState(null),[v,c]=i.useState(!1),[b,E]=i.useState(null),[p,I]=i.useState(null),y=async()=>{var F,M;if(!t||isNaN(t)){u("ID de aprendiz inválido."),l(!1);return}try{const B=sessionStorage.getItem("token");if(!B){u("No hay token de autenticación."),j("/login");return}const V=await w.get(`http://localhost:8080/comentarios/${t}`,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});r(V.data),u(null)}catch(B){console.error("Error al cargar comentarios:",B),((F=B.response)==null?void 0:F.status)===401||((M=B.response)==null?void 0:M.status)===403?(sessionStorage.removeItem("token"),u("Sesión expirada. Por favor, inicia sesión nuevamente."),j("/login")):u("Error al cargar los comentarios.")}finally{l(!1)}};i.useEffect(()=>{y()},[t,j]);const f=F=>{r(A.map(M=>M.idComentario===F.idComentario?F:M)),c(!1),h(null)},o=F=>{h(F),c(!0)},C=F=>{E(F)},T=()=>{E(null)},L=async F=>{try{const M=sessionStorage.getItem("token");if(!M){u("No hay token de autenticación."),j("/login");return}await w.delete(`http://localhost:8080/comentarios/${t}/${F}`,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),r(A.filter(B=>B.idComentario!==F)),E(null)}catch(M){console.error("Error al eliminar comentario:",M),u("Error al eliminar el comentario.")}},D=F=>{if(!p)return!1;const M=p.nombres&&p.apellidos?`${p.nombres} ${p.apellidos}`:p.nombreCompleto||p.nombre||"";return F===M};i.useEffect(()=>{(async()=>{var M,B;try{const V=sessionStorage.getItem("token"),J=sessionStorage.getItem("idUsuario");if(!V||!J){u("No hay token de autenticación o ID de usuario."),j("/login");return}const G=await w.get(`http://localhost:8080/instructores/usuario/${J}`,{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});I(G.data)}catch(V){console.error("Error al obtener datos del instructor:",V),(((M=V.response)==null?void 0:M.status)===401||((B=V.response)==null?void 0:B.status)===403)&&(u("Sesión expirada. Por favor, inicia sesión nuevamente."),j("/login"))}})()},[j]);const k=F=>F?new Date(F).toLocaleDateString("es-ES"):"No definida";return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Comentarios"}),e.jsxs("button",{className:"add-button",onClick:()=>j(`/agregar-comentario/${t}`),children:[e.jsx("span",{className:"icon-plus",children:"+"})," Agregar Comentario"]})]}),e.jsx("div",{className:"card-body",children:d?e.jsx("div",{className:"loading-state",children:e.jsx("p",{children:"Cargando comentarios..."})}):g?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:g})}):A.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No hay comentarios registrados."})}):e.jsx("div",{className:"actividades-grid",children:A.map(F=>e.jsxs("div",{className:"actividad-card",children:[e.jsx("h4",{children:F.nombreInstructor||"Anónimo"}),e.jsxs("p",{children:[e.jsx("span",{children:"Fecha:"})," ",k(F.fechaComentario)]}),e.jsx("div",{className:"actividad-contenido",dangerouslySetInnerHTML:{__html:F.comentario}}),D(F.nombreInstructor)&&e.jsxs("div",{className:"actividad-actions",children:[e.jsxs("button",{className:"btn-editar",onClick:()=>o(F),children:[e.jsx("span",{className:"icon-edit",children:"✎"})," Editar"]}),b===F.idComentario?e.jsxs("div",{className:"confirm-delete",children:[e.jsx("span",{children:"¿Confirmar eliminación?"}),e.jsx("button",{className:"btn-confirm",onClick:()=>L(F.idComentario),children:"Sí"}),e.jsx("button",{className:"btn-cancel",onClick:T,children:"No"})]}):e.jsxs("button",{className:"btn-eliminar",onClick:()=>C(F.idComentario),children:[e.jsx("span",{className:"icon-delete",children:"✖"})," Eliminar"]})]})]},F.idComentario))})}),v&&m&&e.jsx("div",{className:"modal-overlay",onClick:()=>{c(!1),h(null)},children:e.jsx("div",{className:"modal-content",onClick:F=>F.stopPropagation(),children:e.jsx(re,{comentario:m,onComentarioActualizado:f,onClose:()=>{c(!1),h(null)}})})})]})},De=()=>{const{idAprendiz:t}=K(),[j,A]=i.useState(null),[r,d]=i.useState(!0),[l,g]=i.useState(null),[u,m]=i.useState("informacion"),h=q();return i.useEffect(()=>{(async()=>{var b,E;const c=sessionStorage.getItem("token");if(!c){h("/login");return}try{const p={headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}},I=await w.get(`http://localhost:8080/aprendices/${t}`,p);A(I.data),d(!1)}catch(p){((b=p.response)==null?void 0:b.status)===403||((E=p.response)==null?void 0:E.status)===401?(sessionStorage.removeItem("token"),h("/login")):g("Error al cargar el aprendiz."),d(!1)}})()},[t,h]),r?e.jsx("div",{children:"Cargando..."}):l?e.jsx("div",{children:l}):j?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"containerAprendiz",children:[e.jsxs("div",{className:"containerHeaderSelect",children:[e.jsx("h2",{children:"Detalles del Aprendiz"}),e.jsxs("select",{className:"containerSelect",value:u,onChange:v=>m(v.target.value),children:[e.jsx("option",{value:"informacion",children:"Información del Aprendiz"}),e.jsx("option",{value:"actividades",children:"Actividades Complementarias"}),e.jsx("option",{value:"planes",children:"Planes de Mejoramiento"}),e.jsx("option",{value:"comentarios",children:"Comentarios"})]})]}),u==="informacion"&&e.jsxs("div",{className:"containerInfo",children:[e.jsx("h3",{children:"Información del Aprendiz"}),e.jsxs("div",{className:"info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Documento:"})," ",j.document]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombres:"})," ",j.nombres]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Apellidos:"}),j.apellidos]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha Nacimiento: "})," ",j.fechaNacimiento," "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Genero:"})," ",j.genero," "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Correo:"})," ",j.correo," "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefono:"})," ",j.telefono," "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Residencia:"})," ",j.residencia," "]}),e.jsx("button",{children:"Editar Informacion"})]})]}),u==="actividades"&&e.jsx(Ae,{idAprendiz:t}),u==="planes"&&e.jsx(Ie,{idAprendiz:t}),u==="comentarios"&&e.jsx(oe,{idAprendiz:t})]})}):e.jsx("div",{children:"No se encontró el aprendiz"})},Pe=()=>{const t=q(),[j,A]=i.useState(!1),[r,d]=i.useState(""),[l,g]=i.useState(!1),[u,m]=i.useState([]),h=i.useRef(null),v=i.useRef(null);i.useEffect(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},[u]),i.useEffect(()=>{const E=p=>{h.current&&!h.current.contains(p.target)&&j&&A(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[j]);const c=E=>{m(p=>[...p,{from:"bot",text:E}])},b=async E=>{var p,I;if(E.preventDefault(),!!r.trim()){m(y=>[...y,{from:"user",text:r}]),g(!0);try{const y=sessionStorage.getItem("token");if(!y){c("No hay token de autenticación disponible. Redirigiendo al login."),g(!1),setTimeout(()=>{t("/login")},1e3);return}const f=r.match(/documento\s+(\d+)/i);if(!(f?f[1]:null)){c("Por favor, incluye un número de documento en el prompt (ej: 'documento 123422')."),g(!1);return}const C={messages:[{content:r}],idFicha:"",temperature:.2,maxOutputTokens:1024},{data:T}=await w.post("http://localhost:8080/gemini/generate",C,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(T.status==="success"){const D=`
${T.tipoDocumento==="actividad complementaria"?"Actividad Complementaria":"Plan de Mejoramiento"} generada:
Nombre del Comité: ${T.nombreComite}
Agenda o Puntos para Desarrollar: ${T.agenda}
Objetivos de la Reunión: ${T.objetivos}
Desarrollo de la Reunión: ${T.desarrollo}
Conclusiones: ${T.conclusiones}
        `.trim();c(D),setTimeout(()=>{const k=T.tipoDocumento==="actividad complementaria"?`/agregar-actividad/${T.idAprendiz}`:`/agregar-plan/${T.idAprendiz}`;t(k,{state:{actividadGenerada:T}})},1e3)}else if(T.status==="incomplete"){const L=T.message||"Respuesta incompleta.";c(L)}}catch(y){console.error("Error al procesar la solicitud:",y);const f=((I=(p=y.response)==null?void 0:p.data)==null?void 0:I.error)||"Error al procesar la solicitud: "+y.message;c(f)}finally{g(!1),d("")}}};return e.jsxs("div",{className:"chatbot-widget",ref:h,children:[e.jsx("button",{className:`chatbot-toggle-button ${l?"blink":""}`,onClick:()=>{A(E=>!E)},children:"💬"}),j&&e.jsxs("div",{className:"chatbot-content",children:[e.jsxs("div",{className:"chatbot-messages",children:[u.map((E,p)=>e.jsx("div",{className:`chatbot-message ${E.from}`,children:e.jsx("div",{className:"message-content",children:E.text.split(`
`).map((I,y)=>e.jsxs("span",{children:[I,e.jsx("br",{})]},y))})},p)),e.jsx("div",{ref:v})]}),e.jsxs("form",{className:"chatbot-form",onSubmit:b,children:[e.jsx("input",{type:"text",value:r,onChange:E=>d(E.target.value),placeholder:"Ej: 'Haz una actividad para el aprendiz con documento 123422' o 'Haz un plan para el aprendiz con documento 123422'",disabled:l}),e.jsx("button",{type:"submit",className:l?"blink":"",disabled:l||!r.trim(),children:l?"Procesando...":"Enviar"})]})]})]})},Oe=()=>{const[t,j]=i.useState(""),[A,r]=i.useState(!1),[d,l]=i.useState(null),[g,u]=i.useState(!1),m=q(),h=async v=>{var c,b;v.preventDefault(),r(!0),l(null),u(!1);try{console.log("Enviando email:",t);const E=await w.post("http://localhost:8080/password-reset/request",{email:t});u(!0),setTimeout(()=>m("/login"),3e3)}catch(E){l(((b=(c=E.response)==null?void 0:c.data)==null?void 0:b.message)||"Error al enviar la solicitud. Por favor, intenta nuevamente.")}finally{r(!1)}};return e.jsx("div",{className:"PrincipalContainer",children:e.jsxs("div",{className:"loginContainer",children:[e.jsx("h1",{children:"Recuperar Contraseña"}),e.jsx("p",{children:"Ingresa tu correo electrónico para recibir un enlace de restablecimiento."}),e.jsxs("form",{className:"loginForm",onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Correo Electrónico"}),e.jsx("input",{type:"email",value:t,onChange:v=>j(v.target.value),placeholder:"Ingresa tu correo",required:!0,disabled:g||A})]}),e.jsxs("div",{className:"form-actions-send",children:[e.jsx("button",{type:"button",className:"cancel-button-send",onClick:()=>m("/login"),disabled:A||g,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"submit-button-send",disabled:A||g,children:A?"Enviando...":"Enviar"})]})]}),d&&e.jsx("div",{className:"error-message",children:d}),g&&e.jsx("div",{className:"success-modal-overlay",children:e.jsxs("div",{className:"success-modal-content",children:[e.jsx("h2",{children:"¡Enlace de restablecimiento enviado exitosamente!"}),e.jsx("p",{children:"Se ha enviado un enlace de restablecimiento a tu correo. Serás redirigido al login en 5 segundos."})]})})]})})},Re=()=>{const[t,j]=i.useState(""),[A,r]=i.useState(""),[d,l]=i.useState(null),[g,u]=i.useState(!1),[m]=te(),h=q();i.useEffect(()=>{m.get("token")||l("No se proporcionó un token válido.")},[m]);const v=async c=>{var b,E;if(c.preventDefault(),l(null),u(!1),t!==A){l("Las contraseñas no coinciden.");return}try{const p=m.get("token");await w.post("http://localhost:8080/password-reset/reset",{token:p,newPassword:t}),u(!0),setTimeout(()=>h("/login"),5e3)}catch(p){l(((E=(b=p.response)==null?void 0:b.data)==null?void 0:E.message)||"Error al restablecer la contraseña.")}};return e.jsx("div",{className:"principal-container",children:e.jsxs("div",{className:"loginContainer",children:[e.jsx("h1",{children:"Restablecer Contraseña"}),e.jsx("p",{children:"Ingresa tu nueva contraseña a continuación."}),e.jsxs("form",{onSubmit:v,className:"loginForm",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nueva Contraseña"}),e.jsx("input",{type:"password",value:t,onChange:c=>j(c.target.value),placeholder:"Ingresa nueva contraseña",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Confirmar Contraseña"}),e.jsx("input",{type:"password",value:A,onChange:c=>r(c.target.value),placeholder:"Confirma nueva contraseña",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Cambiar Contraseña"})]}),d&&e.jsx("div",{className:"error-message",children:d}),g&&e.jsx("div",{className:"success-message",children:"Contraseña restablecida con éxito. Serás redirigido al login en 5 segundos."})]})})};function Te(){const[t,j]=i.useState(()=>!!sessionStorage.getItem("token")),[A,r]=i.useState(null);i.useEffect(()=>{t&&fetch("http://localhost:3001/data").then(l=>l.json()).then(l=>r(l)).catch(l=>console.error("Error:",l))},[t]);const d=l=>{sessionStorage.setItem("token",l),j(!0)};return t?e.jsxs("div",{className:"container-app",children:[e.jsx(Ee,{}),e.jsx(ce,{className:"container-main",children:e.jsxs(ae,{children:[e.jsx(U,{path:"/",element:e.jsx(de,{})}),e.jsx(U,{path:"/gestion-programas",element:e.jsx(pe,{})}),e.jsx(U,{path:"/agregar-programa",element:e.jsx(ue,{})}),e.jsx(U,{path:"/gestion-fichas",element:e.jsx(je,{})}),e.jsx(U,{path:"/agregar-ficha",element:e.jsx(xe,{})}),e.jsx(U,{path:"/gestion-instructores",element:e.jsx(ge,{})}),e.jsx(U,{path:"/agregar-instructor",element:e.jsx(fe,{})}),e.jsx(U,{path:"/gestion-aprendices",element:e.jsx(Ne,{})}),e.jsx(U,{path:"/agregar-actividad/:idAprendiz",element:e.jsx(be,{})}),e.jsx(U,{path:"/agregar-plan/:idAprendiz",element:e.jsx(Se,{})}),e.jsx(U,{path:"/aprendices/:idAprendiz/comentarios",element:e.jsx(oe,{})}),e.jsx(U,{path:"/agregar-comentario/:idAprendiz",element:e.jsx(ye,{})}),e.jsx(U,{path:"/aprendices/:idAprendiz/comentarios/:idComentario/editar",element:e.jsx(re,{})}),e.jsx(U,{path:"/aprendices/:idAprendiz",element:e.jsx(De,{})}),e.jsx(U,{path:"/AboutUs",element:e.jsx(me,{})})]})}),e.jsx(Pe,{})]}):e.jsx(he,{onLogin:d})}const Fe=()=>{const t=q(),[j,A]=i.useState([]),[r,d]=i.useState({}),[l,g]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const I=await w.get("http://localhost:8080/fichas/disponibles");console.log("Respuesta de fichas:",I.data),A(I.data)}catch(I){console.error("Error cargando fichas:",I),I.response?(console.error("Detalles del error:",I.response.status,I.response.data),d({general:`Error al cargar fichas: ${I.response.status}`})):d({general:"No se pudo conectar al servidor para cargar fichas."})}})()},[]);const[u,m]=i.useState({tipoDocumento:"",documento:"",nombres:"",apellidos:"",fechaNacimiento:"",correo:"",genero:"",contrasena:"",telefono:"",residencia:"",numeroFicha:""}),h=p=>{m({...u,[p.target.name]:p.target.value})},v=p=>{d(I=>({...I,[p.target.name]:""}))},c=()=>{let p={};return u.tipoDocumento||(p.tipoDocumento="Seleccione un tipo de documento."),u.documento||(p.documento="Ingrese un número de documento."),u.nombres.trim()||(p.nombres="Ingrese su nombre."),u.apellidos.trim()||(p.apellidos="Ingrese sus apellidos."),u.fechaNacimiento||(p.fechaNacimiento="Seleccione su fecha de nacimiento."),u.correo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.correo)||(p.correo="Ingrese un correo válido."):p.correo="Ingrese su correo electrónico.",u.contrasena.trim()?u.contrasena.length<8&&(p.contrasena="La contraseña debe tener al menos 8 caracteres."):p.contrasena="Ingrese una contraseña.",u.telefono.trim()?/^\d+$/.test(u.telefono)||(p.telefono="El teléfono debe contener solo números."):p.telefono="Ingrese un número de teléfono.",u.genero||(p.genero="Seleccione un género."),u.residencia.trim()||(p.residencia="Ingrese su dirección de residencia."),u.numeroFicha||(p.numeroFicha="Seleccione una ficha."),d(p),Object.keys(p).length===0},b=async p=>{if(p.preventDefault(),d({}),!c()){console.log("Errores de validación:",r);return}g(!0);try{console.log("Datos enviados:",u),await w.post("http://localhost:8080/aprendices/RegistroAprendiz",u),alert("Registro exitoso."),await E(u.correo),t("/login")}catch(I){if(console.error("Error en la respuesta:",I.response),I.response&&I.response.data){const y=I.response.data;if(typeof y=="object"){const f={};Object.keys(y).forEach(o=>{f[o]=y[o]}),(y.message||y.error)&&(f.general=y.message||y.error),d(f),console.log("Errores del backend:",f)}else d(typeof y=="string"?{general:y}:{general:"Ocurrió un error desconocido."})}else d({general:"No se pudo conectar al servidor."})}g(!1)},E=async p=>{var I;if(!p){console.error("El correo es inválido.");return}try{const y={subject:"Registro Exitoso",to:p,dataTemplate:{name:u.nombres||"Usuario"},template:"registro.html"};await w.post("http://localhost:7071/api/httpTrigger1",y),console.log("Correo enviado exitosamente")}catch(y){console.error("Error al enviar el correo:",((I=y.response)==null?void 0:I.data)||y.message)}};return e.jsxs("div",{className:"registro-container",children:[e.jsx("h1",{children:"Registro de Aprendiz"}),e.jsxs("form",{onSubmit:b,className:"registro-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"form-section-title",children:"Información Personal"}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"field-group-pair",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"tipoDocumento",children:"Tipo de Documento"}),e.jsxs("select",{id:"tipoDocumento",name:"tipoDocumento",value:u.tipoDocumento,onChange:h,onFocus:v,className:"tipoDocSel",children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccionar"}),e.jsx("option",{value:"CEDULA_CIUDADANIA",children:"Cédula de Ciudadanía"}),e.jsx("option",{value:"TARJETA_IDENTIDAD",children:"Tarjeta de Identidad"}),e.jsx("option",{value:"CEDULA_EXTRANJERIA",children:"Cédula de Extranjería"}),e.jsx("option",{value:"PASAPORTE",children:"Pasaporte"})]}),r.tipoDocumento&&e.jsx("p",{className:"error",children:r.tipoDocumento})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"documento",children:"Número de Documento"}),e.jsx("input",{id:"documento",type:"number",name:"documento",placeholder:"Ingrese número",value:u.documento,onChange:h,onFocus:v}),r.documento&&e.jsx("p",{className:"error",children:r.documento})]})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"field-group-pair",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"nombres",children:"Nombres"}),e.jsx("input",{id:"nombres",type:"text",name:"nombres",placeholder:"Ingrese nombres",value:u.nombres,onChange:h,onFocus:v}),r.nombres&&e.jsx("p",{className:"error",children:r.nombres})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"apellidos",children:"Apellidos"}),e.jsx("input",{id:"apellidos",type:"text",name:"apellidos",placeholder:"Ingrese apellidos",value:u.apellidos,onChange:h,onFocus:v}),r.apellidos&&e.jsx("p",{className:"error",children:r.apellidos})]})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"field-group-pair",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"fechaNacimiento",children:"Fecha de Nacimiento"}),e.jsx("input",{id:"fechaNacimiento",type:"date",name:"fechaNacimiento",value:u.fechaNacimiento,onChange:h,onFocus:v}),r.fechaNacimiento&&e.jsx("p",{className:"error",children:r.fechaNacimiento})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"genero",children:"Género"}),e.jsxs("select",{id:"genero",name:"genero",value:u.genero,onChange:h,onFocus:v,children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccionar"}),e.jsx("option",{value:"Masculino",children:"Masculino"}),e.jsx("option",{value:"Femenino",children:"Femenino"}),e.jsx("option",{value:"Otro",children:"Otro"})]}),r.genero&&e.jsx("p",{className:"error",children:r.genero})]})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"form-section-title",children:"Información de Contacto"}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"field-group-pair",children:[e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"correo",children:"Correo Electrónico"}),e.jsx("input",{id:"correo",type:"email",name:"correo",placeholder:"ejemplo@correo.com",value:u.correo,onChange:h,onFocus:v}),r.correo&&e.jsx("p",{className:"error",children:r.correo})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"telefono",children:"Teléfono"}),e.jsx("input",{id:"telefono",type:"text",name:"telefono",placeholder:"Número de teléfono",value:u.telefono,onChange:h,onFocus:v}),r.telefono&&e.jsx("p",{className:"error",children:r.telefono})]})]})}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"residencia",children:"Dirección de Residencia"}),e.jsx("input",{id:"residencia",type:"text",name:"residencia",placeholder:"Dirección completa",value:u.residencia,onChange:h,onFocus:v}),r.residencia&&e.jsx("p",{className:"error",children:r.residencia})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"form-section-title",children:"Acceso y Programa"}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"contrasena",children:"Contraseña"}),e.jsx("input",{id:"contrasena",type:"password",name:"contrasena",placeholder:"Mínimo 8 caracteres",value:u.contrasena,onChange:h,onFocus:v}),r.contrasena&&e.jsx("p",{className:"error",children:r.contrasena})]}),e.jsxs("div",{className:"field-group",children:[e.jsx("label",{htmlFor:"numeroFicha",children:"Ficha de Programa"}),e.jsxs("select",{id:"numeroFicha",name:"numeroFicha",value:u.numeroFicha,onChange:h,onFocus:v,children:[e.jsx("option",{value:"",disabled:!0,children:"Seleccione su ficha"}),j.map(p=>e.jsx("option",{value:p.numeroFicha,children:`${p.numeroFicha} - ${p.nombrePrograma}`},p.idFicha))]}),r.numeroFicha&&e.jsx("p",{className:"error",children:r.numeroFicha})]})]}),r.general&&e.jsx("p",{className:"error general-error",children:r.general}),e.jsx("button",{type:"submit",disabled:l,children:l?"Procesando...":"Completar Registro"})]})]})};ie(document.getElementById("root")).render(e.jsx(le,{children:e.jsxs(ae,{children:[e.jsx(U,{path:"/registroAprendiz",element:e.jsx(Fe,{})}),e.jsx(U,{path:"/forgot-password",element:e.jsx(Oe,{})}),e.jsx(U,{path:"/reset-password",element:e.jsx(Re,{})}),e.jsx(U,{path:"*",element:e.jsx(Te,{})})]})}));
